EXTRA! EXTRA! Call Transaction Ignora Authority-Checks!
Autor: Mauricio Cruz
Data: 17/12/2010 00:02

E √© com esse clima de not√≠cia bomb√°stica, datena-style, que eu conto pra voc√™s uma coisa que normalmente n√£o nos atentamos no dia-a-dia corrido de projetos:
O Call Transaction, esse comando m√°gico, simplesmente ignora a verifica√ß√£o de autoriza√ß√£o para o usu√°rio que executar o programa que dispara o call transaction.
Num primeiro momento isso parece simples, mas √© muito interessante ver o n√∫mero de ABAPs que conhecem as ‚Äúfun√ß√µes para acessar a transa√ß√£o X ou Y‚Äù, mas n√£o sabem o
porque elas funcionam
e te levam para aquela transa√ß√£o X que vai salvar a sua vida (pensou na su01, n√©?
espertinho
!).
ABAP "espertinho"
Na verdade, o pr√≥prio help da SAP explica. Apertando o famoso F1 no comando CALL TRANSACTION, vamos nos deparar com a seguinte frase:
‚ÄúAt the statement
CALL TRANSACTION
, the authorization of the current user to execute the called transaction is not checked automatically. If the calling program does not execute a check, the called program must check the authorization. To do this, the called program must call function module AUTHORITY_CHECK_TCODE.‚Äù
Link:
http://help.sap.com/abapdocu_70/en/ABAPCALL_TRANSACTION.htm
Ou seja, ou voc√™ chama antes do CALL TRANSACTION a fun√ß√£o
AUTHORITY_CHECK_TCODE
, ou o comando ignora o check de autoriza√ß√£o para a transa√ß√£o nas configura√ß√µes do usu√°rio.
Agora voc√™ entendeu como ‚Äúaquela‚Äù fun√ß√£o m√°gica funciona!‚Ä¶
‚Ä¶
Apesar que agora ela deixou de ser m√°gica
üôÅ
Agora, caso voc√™ queira acabar com a brincadeira da galera, voc√™ pode for√ßar o SAP a rodar a autoriza√ß√£o para o CALL TRANSACTION no programa Z, mesmo sem chamar a fun√ß√£o AUTHORITY_CHECK_TCODE. Bem vindos √† transa√ß√£o SE97!
Transa√ß√£o SE97, sua arma contra espertinhos
√â f√°cil configurar, e voc√™ pode at√© escolher qual tipo de mensagem retornar ap√≥s o check de autoriza√ß√£o.
A√≠ voc√™ pode configurar a transa√ß√£o, praticamente dizendo: ‚ÄúEu vou fazer um CALL TRANSACTION nessa transa√ß√£o, e eu quero que voc√™ rode a verifica√ß√£o de autoriza√ß√µes seu SAP folgado! Vai trabalhar!‚Äù.
E pronto! Num post s√≥ acabei com a magia das fun√ß√µes que d√£o gato, e ainda expliquei como ser
mais esperto
que os espertinhos de plant√£o e n√£o deixar ningu√©m burlar seu sistema.
Divirtam-se!
Ps.: Coment√°rios com nome das fun√ß√µes n√£o mais t√£o m√°gicas ser√£o deletados. Nada de ensinar a burlar sistemas por aqui! üòÄ



Coment√°rios:
Basis RJ (12/05/2015 17:52): S√≥ lembrando que fica rastro, ou seja, fica log na auditoria do SAP. J√° peguei v√°rios espertinhos fazendo isso. Abra√ßos,
Erik Bormann (17/12/2010 08:52): ABAPDOCU para o ABAP espertinho!
  miojox (25/05/2011 12:44): EU pensei que ABAPDOCU era pros abaps gays!
    Mauricio Cruz (25/05/2011 14:03): Na verdade √© para os ABAPs n√£o-homof√≥bicos üòÄ
    Mauricio Cruz (25/05/2011 14:03): Na verdade √© para os ABAPs n√£o-homof√≥bicos üòÄ
  miojox (25/05/2011 12:44): EU pensei que ABAPDOCU era pros abaps gays!
    Mauricio Cruz (25/05/2011 14:03): Na verdade √© para os ABAPs n√£o-homof√≥bicos üòÄ
    Mauricio Cruz (25/05/2011 14:03): Na verdade √© para os ABAPs n√£o-homof√≥bicos üòÄ
ABAP &quot;espertinh (17/12/2010 07:45): Magoei!