Tela de SeleÃ§Ã£o Turbinada â€“ Parte 1 â€“ BotÃµes
Autor: Mauricio Cruz
Data: 21/12/2010 11:49

A tela de seleÃ§Ã£o no SAP contÃ©m inÃºmeras funÃ§Ãµes que poucas pessoas utilizam. Ã‰ possÃ­vel criar subscreens, botoes, tabstripsâ€¦ A idÃ©ia dessa sÃ©rie de posts Ã© tentar
prevenir que vocÃª crie um online ou uma tela sem necessidade,
alÃ©m de
ajudar vocÃª a deixar sua tela de seleÃ§Ã£o mais â€œgringaâ€
, e quem sabe surpreender algum usuÃ¡rio por aÃ­ ğŸ˜‰
Deixa sua tela de seleÃ§Ã£o
no modo turbo
apÃ³s essa sequÃªncia de posts!
Dica de hojeâ€¦
como adicionar um botÃ£o na tela de seleÃ§Ã£o?
Veja o cÃ³digo abaixo. VocÃª pode tambÃ©m usar o velho e sempre bom CTRL+C CTRL+V e testar num programa local num ambiente que vocÃª tenha acesso:
REPORT z_teste_botao.

* Estrutura necessÃ¡ria para manipulaÃ§Ã£o do elemento na Tela
*----------------------------------------------------------
TABLES: sscrfields.

* Type Pools com os Ãcones (duplo clique para visualiza-los) Â Â  Â 
*----------------------------------------------------------
TYPE-POOLS: icon.

* DeclaraÃ§Ã£o do BotÃ£o
* VocÃª pode utilizar da funÃ§Ã£o 1 atÃ© a funÃ§Ã£o 5
* O atalho serÃ¡ Ctrl+Fx onde X Ã© o nÃºmero da Function Key
*--------------------------------------------------------
SELECTION-SCREEN: FUNCTION KEY 1. "DeclaraÃ§Ã£o do BotÃ£o

* O BotÃ£o por sÃ­ sÃ³ nÃ£o faz uma tela de seleÃ§Ã£o.
* Outros elementos de tela devem existir, e o botÃ£o irÃ¡ aparecer ao lado
* do botÃ£o executar.
*-----------------------------------------------------------------------
PARAMETERS: p_dummy TYPE char10.

* Descrevendo o botÃ£o no evento Initialization
*---------------------------------------------
INITIALIZATION.

 PERFORM cria_botao.

* ManipualaÃ§Ã£o do BotÃ£o
*----------------------
AT SELECTION-SCREEN.

 IF sy-ucomm = 'FC01'.
 BREAK-POINT.
 ENDIF.

*&---------------------------------------------------------------------*
*&Â Â Â Â Â  FormÂ  cria_botao
*&---------------------------------------------------------------------*
FORM cria_botao .

*Â  Estrutura para descrever o botÃ£o
 DATA: wa_button TYPE smp_dyntxt.

*Â  Nome do BotÃ£o
 wa_button-textÂ Â Â Â Â  = 'Botao Log de Erros'.

*Â  Ãcone do BotÃ£o
 wa_button-icon_idÂ Â  = icon_error_protocol.

*Â  Texto que aparecerÃ¡ ao lado do Ã­cone (pode ser vazio)
 wa_button-icon_text = 'Log de Erros'.

*Â  Quickinfo (aparece quando o user passar o mouse sobre o botao)
 wa_button-quickinfo = 'Visualizar Log de Erros'.

*Â  Associa essas propriedades com a funÃ§Ã£o 1
 sscrfields-functxt_01 = wa_button.

ENDFORM.Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  " cria_botao
VocÃª pode atribuir pop-ups nos botÃµes, outros programas atravÃ©s de um submit, mostrar uma SM30, chamar alguma transaÃ§Ã£o com call transaction.. as opÃ§Ãµes sÃ£o inÃºmeras.
A tela de seleÃ§Ã£o vai ficar assim com o cÃ³digo acima. Se liga ali no botÃ£o!
Clicando no botÃ£o, o programa cai nesse evento. AÃ­ vocÃª pode colocar a chamada que vocÃª quiser!
Continue seguindo os posts
para descobrir como fazer uma tela de seleÃ§Ã£o turbinada. No Ãºltimo post irei mostrar uma tela que una todos os cÃ³digos de tela de seleÃ§Ã£o listados aqui no blog.
AbraÃ§os!



ComentÃ¡rios:
Danilo Arguelho (28/07/2022 15:23): perfeiÃ§Ã£o de conteÃºdo, valeu!
LUIZ CARLOS DE SOUZA (10/05/2016 15:31): Daria para utilizar ele como Exit-Command ?  Por exemplo, ele executar a funÃ§Ã£o dele ignorando os campos obrigatÃ³rios de uma tela. E parabÃ©ns pelo trabalho!
  rafael (14/08/2019 16:29): estou tentando fazer isso, vocÃª descobriu?
  rafael (14/08/2019 16:29): estou tentando fazer isso, vocÃª descobriu?
AndrÃ© Pampolin (16/07/2013 18:00): Mauricioâ€¦ descobriâ€¦ Ã© que o meu programa estava com o campo â€œBanco de dados lÃ³gico = PNPâ€, e assim ele sempre Ã© o primeiro botÃ£o a aparecerâ€¦ bastou eu trocar no cÃ³digo onde estava botÃ£o 1 para 2 que deu certoâ€¦ Valeu.
AndrÃ© Pampolin (16/07/2013 17:18): Mauricio, fiz o teste do botÃ£o acima Ctrl+C Ctrl+V, porÃ©m nÃ£o apareceu o botÃ£oâ€¦ serÃ¡ que tem a ver com a versÃ£o do SAP, atualmente estamos na 6.0
Amanda PF (11/08/2011 18:23): Boa noite MaurÃ­cio! Estou iniciando em abap e estou adorando seu blog! ParabÃ©ns! Estou com algumas dÃºvidas a respeito desse cÃ³digoâ€¦ 1- "IF sy-ucomm = 'FC01'." Nessa linha, esse sy-ucomm Ã© por exemplo, uma variÃ¡vel para validar a execuÃ§Ã£o e entrada de dados? Por que no caso do botÃ£o seu valor Ã© igual a 'FC01' ? 2- E no cÃ³digo de apagar o botÃ£o: "nÃ£o entendi o pq da criaÃ§Ã£o desse campo" FIELD-SYMBOLS:  TYPE ANY. "por que concatenar esses dados?" CONCATENATE 'SSCRFIELDS-FUNCTXT_0' p_number INTO v_field. "aqui nÃ£o entendi nd rs" ASSIGN (v_field) TO . IF sy-subrc = 0. CLEAR . ENDIF. Obrigado pela atenÃ§Ã£o! ğŸ™‚
Henrique Dias (28/02/2011 07:27): Eu fiz um teste aqui e nÃ£o precisa usar esse field symbol maroto q vc usou aÃ­ no exemplo. SÃ³ isso jÃ¡ resolve: * Exclui o botÃ£o associado ao FUNCTION KEY 1. CLEAR sscrfields-functxt_01. Ah, e se alguÃ©m quiser excluir o botÃ£o executar Ã© sÃ³ usar o cÃ³digo abaixo: * Include de Selection Screen Standard INCLUDE rsdbc1xx. * Exclui o botÃ£o Executar da tela de seleÃ§Ã£o (a estrutura current_scr pode variar dependendo da versÃ£o do SAP) APPEND 'ONLI' TO current_scr-excl.
  raoni (27/04/2012 16:49): Henrique, excelente.
  Mauricio Cruz (28/02/2011 07:48): Heouaheouah Curti o fato de vc ter sido simplista. Na verdade eu vou usar o cÃ³digo ali para colocar num mÃ©todo da ABAPZombie Gear, daÃ­ eu fiz de uma vez. Valeu pelo esquema de excluir o executar ğŸ˜€ AbraÃ§o!
  raoni (27/04/2012 16:49): Henrique, excelente.
  Mauricio Cruz (28/02/2011 07:48): Heouaheouah Curti o fato de vc ter sido simplista. Na verdade eu vou usar o cÃ³digo ali para colocar num mÃ©todo da ABAPZombie Gear, daÃ­ eu fiz de uma vez. Valeu pelo esquema de excluir o executar ğŸ˜€ AbraÃ§o!
Henrique (23/02/2011 14:27): Se eu quiser colocar o botÃ£o blz, mas e se eu quiser dar um fim nele quando mudar um radio button por exemplo?
  Mauricio Cruz (25/02/2011 10:51): Ã‰ sÃ³ limpar a work area SSCRFIELDS para apagar este tipo de botÃ£o. Assim: <pre lang="abap" escaped="true"> *&â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”* *&      Form  APAGA_BOTAO *&â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”* FORM apaga_botao  USING p_number TYPE c. * VariÃ¡veis DATA: v_field(21) TYPE c. * Field Symbols FIELD-SYMBOLS: <fs_field> TYPE ANY. CONCATENATE 'SSCRFIELDS-FUNCTXT_0' p_number INTO v_field. ASSIGN (v_field) TO <fs_field>. IF sy-subrc = 0. CLEAR <fs_field>. ENDIF. ENDFORM.                    " APAGA_BOTAO </pre> Ã‰ sÃ³ chamar o comando PERFORM apaga_botao USING '1', se vocÃª quiser apagar o botÃ£o associado a function key 1, por exemplo. FaÃ§a isso no AT SELECTION SCREEN OUTPUT e seja feliz ğŸ˜€ AbraÃ§o!
  Mauricio Cruz (25/02/2011 10:51): Ã‰ sÃ³ limpar a work area SSCRFIELDS para apagar este tipo de botÃ£o. Assim: <pre lang="abap" escaped="true"> *&â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”* *&      Form  APAGA_BOTAO *&â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”* FORM apaga_botao  USING p_number TYPE c. * VariÃ¡veis DATA: v_field(21) TYPE c. * Field Symbols FIELD-SYMBOLS: <fs_field> TYPE ANY. CONCATENATE 'SSCRFIELDS-FUNCTXT_0' p_number INTO v_field. ASSIGN (v_field) TO <fs_field>. IF sy-subrc = 0. CLEAR <fs_field>. ENDIF. ENDFORM.                    " APAGA_BOTAO </pre> Ã‰ sÃ³ chamar o comando PERFORM apaga_botao USING '1', se vocÃª quiser apagar o botÃ£o associado a function key 1, por exemplo. FaÃ§a isso no AT SELECTION SCREEN OUTPUT e seja feliz ğŸ˜€ AbraÃ§o!