Tela de Sele√ß√£o Turbinada ‚Äì Parte 4 ‚Äì Novas Telas!
Autor: Mauricio Cruz
Data: 03/01/2011 14:17

Feliz 2011! Ano novo, vida nova, post novo!
Continuando a sequ√™ncia de posts da tela de sele√ß√£o, vamos agora criar
novas telas de sele√ß√£o
dentro de um mesmo report. √â muito simples e muito √∫til para tratar
‚Äúaquela‚Äù
tela adicional com par√¢metros que o povo sempre inventa de √∫ltima hora!
Vamos ao c√≥digo:
REPORT z_novatela_zombie.

TYPE-POOLS: icon.
TABLES: sscrfields.

* Come√ßo criando uma tela dummy
*------------------------------
SELECTION-SCREEN BEGIN OF BLOCK BL01 WITH FRAME.

PARAMETER: p_tela1 TYPE char10.

SELECTION-SCREEN END OF BLOCK BL01.

* Esses bot√µes ir√£o chamar as novas telas
*----------------------------------------
SELECTION-SCREEN FUNCTION KEY 1.
SELECTION-SCREEN FUNCTION KEY 2.

* Cria√ß√£o de uma nova tela de sele√ß√£o. Bem simples!
*--------------------------------------------------
SELECTION-SCREEN BEGIN OF SCREEN 9000.

SELECTION-SCREEN COMMENT /1(40) text1.
PARAMETER: p_nova TYPE char10.

SELECTION-SCREEN END OF SCREEN 9000.

* Outra tela de sele√ß√£o. Voc√™ pode criar quantas quiser
* (apesar que a numera√ß√£o de telas tem s√≥ 4 digitos.. enfim :P)
*--------------------------------------------------------------
SELECTION-SCREEN BEGIN OF SCREEN 9001.

SELECTION-SCREEN COMMENT /1(40) text2.
PARAMETER: p_popup TYPE char10.

SELECTION-SCREEN END OF SCREEN 9001.

* Evento para colcoar texto no coment√°rios e ajustar os bot√µes
*-------------------------------------------------------------
INITIALIZATION.

PERFORM cria_botao.

text1 = 'Tela Nova em Tela Cheia!'.
text2 = 'Tela Nova como Pop-up!'.

* Acerto das chamadas das novas telas.
*------------------------------------
AT SELECTION-SCREEN.

  CASE sy-ucomm.

*  Neste caso, chamando a tela como uma nova tela fullscreen.
   WHEN 'FC01'.
    CALL SELECTION-SCREEN 9000.

*  Aqui, chamando a nova tela como um pop-up
   WHEN 'FC02'.
    CALL SELECTION-SCREEN 9001 STARTING AT 5 5 ENDING AT 50 8.

  ENDCASE.

* O form abaixo √© do post da PARTE 1 da sequ√™ncia Tela de Sele√ß√£o
* turbinada. Estou usando para preencher os dados dos bot√µes.
*&---------------------------------------------------------------------*
*&      Form  cria_botao
*&---------------------------------------------------------------------*
FORM cria_botao .

 DATA: wa_button TYPE smp_dyntxt.

 wa_button-text      = 'Tela Cheia'.
 wa_button-icon_id   = ICON_BUSINAV_SZENARIO.
 wa_button-icon_text = 'Tela Cheia'.
 sscrfields-functxt_01 = wa_button.

 wa_button-text      = 'Tela Pop-Up'.
 wa_button-icon_id   = ICON_SYSTEM_MODUS_CREATE.
 wa_button-icon_text = 'Tela Pop-Up'.
 sscrfields-functxt_02 = wa_button.

ENDFORM.                    " cria_botao
Denovo, jogar num Z local e rodar (j√° pensou em quantas mil vezes voc√™ fez isso? :-o). Vai ficar
bunito
, como segue:
Tela de Sele√ß√£o Simples. Por√©m, clicando nos bot√µes...
"Tela Cheia": Nova tela de sele√ß√£o exibida em fullscreen. Notem que os bot√µes da primeira tela de sele√ß√£o n√£o se repetem!
"Tela Pop-up": Mostra uma nova tela de sele√ß√£o como pop-up! Sim, d√° pra salvar variante do pop-up üôÇ
Telas novas em onlines tamb√©m s√£o simples, mas acho essa alternativa interessante e o resultado visual √© praticamente o mesmo. Acho que a principal diferen√ßa √© poder declarar select-options normalmente, coisa que √© bem chata de tratar em telas de onlines.
Espero que ajude! No pr√≥ximo post, dicas gerais para selections screens e na sequ√™ncia, a tela megazord, fechando a saga de posts!
Abra√ßos!



Coment√°rios:
Nantes (31/08/2012 16:36): Muiiito bom ! Parabens! Todas de tela de sela√ß√£o!!!
Felipe Catelani (01/08/2012 14:58): Boa dica, Mas tenho um d√∫vida‚Ä¶.. o pop up tem os bot√µes executar, verificar, salvar.. Tem como exclui-los? Vlw. Abr√ßs
  Mauricio Cruz (01/08/2012 15:22): Se eu n√£o me engano, tem como fazer utilizando a fun√ß√£o RS_SET_SELSCREEN_STATUS, no evento AT SELECTION SCREEN OUTPUT. Voc√™ passa para ela uma tabela dizendo quais bot√µes voc√™ quer excluir da tela que est√° aparecendo. Tem v√°rios exemplos da utiliza√ß√£o da fun√ß√£o por a√≠, infelizmente eu n√£o tenho nenhum aqui comigo agora üôÅ Mas √© tranquilo de usar! Abra√ßos
  Mauricio Cruz (01/08/2012 15:22): Se eu n√£o me engano, tem como fazer utilizando a fun√ß√£o RS_SET_SELSCREEN_STATUS, no evento AT SELECTION SCREEN OUTPUT. Voc√™ passa para ela uma tabela dizendo quais bot√µes voc√™ quer excluir da tela que est√° aparecendo. Tem v√°rios exemplos da utiliza√ß√£o da fun√ß√£o por a√≠, infelizmente eu n√£o tenho nenhum aqui comigo agora üôÅ Mas √© tranquilo de usar! Abra√ßos