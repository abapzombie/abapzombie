ValidaÃ§Ãµes simples em SM30 â€“ Eventos
Autor: Mauricio Cruz
Data: 13/01/2011 10:47

Esses dias eu expliquei para uma pessoa um
â€œesquemaâ€
que poderia salvar a vida de muitas pessoasâ€¦ mas sÃ³ elas conhecessem esse
â€œesquemaâ€
.
Pergunta do milhÃ£o:
quem aqui jÃ¡ teve que
alterar o cÃ³digo de uma SM30
para validar alguma coisa levanta a mÃ£ooooooo!
Eu sei, eu seiâ€¦
ninguÃ©m gosta
, mas todo mundo jÃ¡ fez! ğŸ™
DaÃ­ vem algum panguÃ¡, entra na se11 e re-gera a sua SM30, tirando todas as chamadas de forms Z do cÃ³digo, e fazendo a sm30 funcionar do jeito standardâ€¦ que era exatamente o que o usuÃ¡rio nÃ£o queria!
Eu sei, eu seiâ€¦
ninguÃ©m gosta
mas jÃ¡ aconteceu com todo mundo! ğŸ™
EntÃ£o, se vocÃª tem consistÃªncias simples, vocÃª pode minimizar esses problemas
usando eventos
!
AtenÃ§Ã£o: o Post ficou looooongo, mas vale a pena! Essa coisa jÃ¡ salvou minha vida algumas vezes!
Bom, vocÃª criou a tabela e gerou sua SM30. DaÃ­ vocÃª precisa fazer uma consistÃªncia sempre que o user entrar com um valor na SM30. Entre na SE11 -> Menu gerar SM30 -> ModificaÃ§Ã£o -> Hora (traduÃ§ao porca! em inglÃªs Ã© Event)
Ignore o pop-up (afinal, TUDO pertence a SAP, duh). Aperte F4 na primeira coluna, e vocÃª vai ver a lista de eventos que podem disparar um FORM "Z".
Escolha um Evento (eu escolhi o 05, sempre que uma nova linha for inserida). DÃª um nome para seu FORM e aperte ENTER. Vai aparecer aquele Ã­cone de editor ali.
Pode apertar Enter na tela de nova include, porque a idÃ©ia Ã© criar uma include separada mesmo. Um detalhe importante Ã© que ele nÃ£o vai criar o comando FORM.. ENDFORM automÃ¡tico. VocÃª deve entrar na mÃ£o. CUIDADO PARA NÃƒO ERRAR O NOME DO FORM! ğŸ˜‰
Ative, a tabela e saia da SE11. Por precauÃ§Ã£o, verifique na SE80 se o Grupo de FunÃ§Ãµes da SM30 tambÃ©m foi ativado. Agora, entre na SM30, coloque uma nova linha e aperte enter... que vai parar no FORM que vocÃª criou! ğŸ˜€
Agora vocÃª me pergunta:
tÃ¡, e daÃ­?
Simples!
Se vocÃª re-gerar a sua SM30, tudo que vocÃª vai ter que fazer para sua lÃ³gica voltar a funcionar na nova SM30, Ã© adicionar UMA linha de cÃ³digo, independente da quantidade de consistÃªncias que vocÃª fez. (claro que se a tabela foi alterada, vocÃª vai ter que ajustar a lÃ³gica.. mas isso Ã© o de menos).
Ã‰ sÃ³ abrir o programa principal do grupo de funÃ§Ãµes da SM30 re-gerada, e adicionar a include que foi criada na hora que vocÃª criou o evento. Simples assim! ğŸ˜€
Tem gente que insiste em alterar o cÃ³digo standard da SM30 para fazer as chamadas dos seus mÃ³dulos ou performs Z. Cada caso Ã© um casoâ€¦ mas se for para fazer consistÃªncias simples, use eventos. Se for pra fazer muita coisa, faÃ§a um online hehe ğŸ™„
AbraÃ§os a todos aquele que nÃ£o tem medo de conhecer coisas velhas como sendo novas ğŸ˜€
AtÃ© a prÃ³xima!



ComentÃ¡rios:
Eduarda (19/05/2025 17:05): 2025 e esse post segue me ajudando hehe valeu!!
Jorge (18/12/2018 01:45): Que m%#Â¥@â€¦sao 2:42 da manhÃ£ e eu olhando como fazer validaÃ§ao de SM30, sendo que faÃ§o isso hÃ¡ anos. InsÃ´nia + ser abap + nÃ£o ter o que ver na Internet dÃ¡ nisso. Devia ter escutado minha mÃ£e e estudado.
Luciano (22/03/2018 16:21): Boa tarde Mauricio Cruz, pesquisando na internet achei um post igualzinho ao seu, atÃ©  com os emoticons!! Vc ganha direitos autorais pela seu post e pelos emoticos tambÃ©m ? kkk abraÃ§o
  Mauricio Cruz (26/03/2018 17:31): Valeu Luciano. O site que tem essa cÃ³pia Ã© horrendoâ€¦ infelizmente nÃ£o tem muito o que fazer â€“ mesmo denunciando, a galera copia de novo. O negÃ³cio Ã© focar no nosso conteÃºdo e torcer pra galera beber a Ã¡gua â€œda fonteâ€. ğŸ™‚ AbraÃ§os!
  Mauricio Cruz (26/03/2018 17:31): Valeu Luciano. O site que tem essa cÃ³pia Ã© horrendoâ€¦ infelizmente nÃ£o tem muito o que fazer â€“ mesmo denunciando, a galera copia de novo. O negÃ³cio Ã© focar no nosso conteÃºdo e torcer pra galera beber a Ã¡gua â€œda fonteâ€. ğŸ™‚ AbraÃ§os!
Fernando (30/08/2017 09:21): Fiz um esquema parecido para incluir um botÃ£o na SM30, para exportar os dados para o Excel. Realmente dÃ¡ pra mexer bastante em telas standard atravÃ©s desses recursos da SAP. Muito boa a postagem!
Miguel (14/06/2017 08:54): Ola a todos. Fiz o evento, a validaÃ§Ã£o da erro no 3Âº campo da minha SM30, sÃ³ que ele retorna para o primeiro campo. Qual a forma de fazer o evento retornar para o campo que estÃ¡ ocorrendo o erro?
Felipe Omarini (31/12/2014 09:01): Eu tenho uma duvida Estou configurando uma SM30 de uma tabela Z e uma das restriÃ§Ãµes Ã© que ao clicar no botÃ£o eliminar sÃ³ deve preencher um flag de eliminaÃ§Ã£o e nÃ£o deletar o resgistro. Alguem tem alguma sugestÃ£o de como se faz isso?
Raul Romano (17/07/2013 13:18): Gostei muito do post, jÃ¡ passei por momentos em que a sm30 tinha 4 eventos e eles estavam em includes diferentes (LÃ³gico, ehehehehe), dai precisava copiar uma por uma pra poder re-gerar a sm30. Agora como foi dito acima, digamos que temos apenas 1 evento na sm30 dai regeramos ela, quando colocamos a chamada da include que tinha aquele Ãºnico evento novamente e ele funciona Ã© porq ficou salvo na memÃ³ria todo o cÃ³digo do evento??
rodrigo (22/08/2012 12:41): muito bomâ€¦excelente
Adriano Miguel (30/07/2011 10:17): Muito bom o Post e muito com o Site , a algum tempo estÃ¡ em meus favoritos, parabensâ€¦
  Mauricio Cruz (01/08/2011 13:00): Valeu a forÃ§a Adriano! AbraÃ§os!
  Mauricio Cruz (01/08/2011 13:00): Valeu a forÃ§a Adriano! AbraÃ§os!
William (14/01/2011 07:47): Muito bom o blog de vcÂ´s, estÃ£o de parabÃ©ns! FantÃ¡stico!