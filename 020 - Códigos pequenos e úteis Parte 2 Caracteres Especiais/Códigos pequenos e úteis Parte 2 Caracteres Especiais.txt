CÃ³digos pequenosâ€¦ e Ãºteis! â€“ Parte 2 â€“ Caracteres Especiais
Autor: Mauricio Cruz
Data: 21/01/2011 13:41

Continuando a nossa saga para resolver problemas simples, chatos e que nÃ£o aguentamos mais resolver, trago hoje um cÃ³digo simples e que eu jÃ¡ devo ter feito umas 192383 milhÃµes de vezes (ao quadrado, claro):
remoÃ§Ã£o de caracteres especiais em strings
. Muitas vezes Ã© sÃ³ dar um TRANSLATE, mas sempre tem aquela string chata que vem a&s^s*s/i;m (assim) :x.
Para acabar de vez com isso, fiz uma classezinha para tratar a remoÃ§Ã£o de caraceteres (especiais, normais, vadios e safados). Veja abaixo:
REPORT  z_caracteres_zumbis.

* Aqui vai a include mÃ¡gica
INCLUDE zaz_remove_characters.

* Objeto da Classe para remoÃ§Ã£o de caracteres
DATA o_conv TYPE REF TO lcl_converte_caracter.

* String qualquer
DATA v_string  TYPE string.

*--------------------------------------------------------------------*
* START-OF-SELECTION
*--------------------------------------------------------------------*
START-OF-SELECTION.

* InstÃ¢nciando a classe
  CREATE OBJECT o_conv.

* String zuadassa!
  v_string = 'a;b@a#p$z%o^m>b:i-e!'.

* Removendo todos os caracteres e todos os espaÃ§os
  o_conv->remove_char_mass( EXPORTING
                             char_remove = ';@#$%^>:-'
                             no_blanks   = 'X'
                            CHANGING
                             string      = v_string ).

* Aqui vai ficar "abapzombie!"
  WRITE v_string.

* Zuando a string denovo!
  v_string = 'a#b#a#p# z#o#m#b#i#e!'.

* Vamos remover o #, e somente os espaÃ§os onde eles estavam
  o_conv->remove_char_single( EXPORTING
                               char_remove = '#'
                              CHANGING
                               string      = v_string ).

* Aqui vai ficar "abap zombie!"
  WRITE v_string.
A include estÃ¡ aqui:
ABAP ZOMBIE GEAR â€“ Remove Caracteres.txt
VocÃª pode remover letras ou nÃºmeros tambÃ©m, usei os caracteres especiais como exemplo porque normalmente sÃ£o eles
que enchem o saco.
Lembrando algumas coisas:
â€“ Caso vocÃª tenha algum outro caso maluco para os cÃ³digos aqui postados, e quiser alterar, sinta-se Ã  vontade. E se quiser compartilhar, poste aqui depois da alteraÃ§Ã£o ğŸ™‚
â€“ Estamos fazendo tudo na 6.0, entÃ£o, em versÃµes anteriores, pode ser necessÃ¡rio fazer algumas adaptaÃ§Ãµes.
â€“ No final vamos ter um post juntando tudo em uma sÃ³ classe, e um esquema mÃ¡gico para vocÃª importar a classe da include na se24 e tornÃ¡-la globlal (esse talvez eu poste antes :D).
AbraÃ§os!



ComentÃ¡rios:
jessica (29/07/2011 04:39): Nossaaaa.. essa aqui eu gostei. obrigada!