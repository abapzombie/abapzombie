User-Exit â€“ NÃ£o deixe as brechas descontroladas â€“ Parte 1 â€“ ClÃ¡ssicas
Autor: Mauricio Cruz
Data: 23/02/2011 08:30

Nova sequÃªncia de posts para acabar com suas dÃºvidas de User-Exits, e organizar em um sÃ³ lugar tutoriais para User Exits de diversos tipos. Vamos lÃ¡!
Todo mundo sabe que a melhor maneira de customizar o sistema Ã© atravÃ©s dessa
maravilha da nova-e-velha era
, as User-Exits.
Detalhe:
Aqui estou usando
User-Exit
como um termo genÃ©rico para todo e qualquer ponto de programas Standard onde os programadores podem colocar lÃ³gicas solicitadas pelo usuÃ¡rio, pelo funcional, pela prÃ³pria sap, por algum maluco no fÃ³rum do SDN, e atÃ© por deus quando as coisas nÃ£o funcionam. (AH MEU DEUS O QUE EU FAÃ‡O AGORA? ğŸ˜¯ ).
A bola da vez sÃ£o as
Exits em Subrotinas
. Essa Ã©, de fato, a mais simples de entender. Vamos analisar o print abaixo:
Estamos numa include standard (MV45AFZZ), e temos uma subrotina que comeÃ§a com o nome USEREXIT. Sugestivo, nÃ£o?
Esse FORM serÃ¡ chamado em algum momento pelo Standard (no caso, pela transaÃ§Ã£o VA01/02), e vocÃª pode colocar cÃ³digo ali dentro!
PorÃ©m, para esse tipo de Exit â€œClÃ¡ssicaâ€, vocÃª terÃ¡ que obter a chave de acesso para alterar o objeto standard com o time de
BASIS
. Em â€œbrechasâ€ mais modernas, isso nÃ£o Ã© necessÃ¡rio (ainda bem! Ã¡s vezes a burocraria para conseguir essas chaves Ã©, literalmente, um pÃ© no saco ğŸ™ ).
Tela que vai "brotar" dos confins do Standard, pedindo uma chave para alterar o objeto.
Mas aÃ­ vocÃª me pergunta: â€œe como eu faÃ§o para achar user exits desse tipo?â€. Normalmente, uma busca pelo nome â€œuser_exitâ€ no programa principal da transaÃ§Ã£o standard encontra algumas exits em subrotinas:
Essa foi uma busca que eu fiz no programa principal da transaÃ§Ã£o VL02n. Achei vÃ¡rias chamadas. Um duplo-clique no PERFORM me levaria atÃ© o programa onde eu colocaria meu cÃ³digo.
Mas, se a busca nÃ£o retornar nada, vocÃª tem vÃ¡rias alternativas: pesquisar no SDN, pesquisar no google, debuggar o standard, conversar com amigos e etc. Existem ainda alguns programas que vocÃª encontra na Internet para achar todas as User-Exits da transaÃ§Ã£o X ou Y.
Uma dica importante:
Galera, quando for para alterar Exits assim, nÃ£o coloque o cÃ³digo direto na Exit. Depois de 3 demandas,
fica uma zona sem tamanho.
Crie um INCLUDE, e coloque o seu cÃ³digo nessa include dentro de um FORMâ€¦ENDFORM. Na Exit, coloque um comentario para identificar o programa e chame o FORM com um PERFORM. Sacou? Pelo menos nÃ£o fica zoneando a subrotina da Exit. JÃ¡ a zona do cÃ³digo dentro da include, Ã© por sua conta ğŸ˜›
AbraÃ§os a todos aqueles que decoraram nome de programas standards de tanto fazer exits.



ComentÃ¡rios:
Custodio (19/07/2011 20:54): Outra coisa importante eh nao utilizar o comando CHECK dentro dos includes (ou dos enhancements), caso contrario os includes posteriores nao serao executados (exceto se o CHECK for dentro de um loop).
  Mauricio Cruz (20/07/2011 05:49): Mto bem observado sobre o CHECK, me esqueci de escrever isso. AliÃ¡s, esse negÃ³cio de CHECK me lembra um certo dump em produÃ§Ã£o que ocorreu num projeto que eu passei, que parava tudo por causa de um mÃ­sero CHECK haha. EntÃ£o CUIDADO! Sobre os enhacements, vou citar num post separado mesmo ğŸ™‚ AbraÃ§os!
  Mauricio Cruz (20/07/2011 05:49): Mto bem observado sobre o CHECK, me esqueci de escrever isso. AliÃ¡s, esse negÃ³cio de CHECK me lembra um certo dump em produÃ§Ã£o que ocorreu num projeto que eu passei, que parava tudo por causa de um mÃ­sero CHECK haha. EntÃ£o CUIDADO! Sobre os enhacements, vou citar num post separado mesmo ğŸ™‚ AbraÃ§os!
Custodio (19/07/2011 20:51): PorÃ©m, para esse tipo de Exit â€œClÃ¡ssicaâ€, vocÃª terÃ¡ que obter a chave de acesso para alterar o objeto standard com o time de BASIS. Depende da versao que voce estiver. Se seu sistema suporta implicit enhancement (acredito que veremos um post sobre eles em breve) basta criar um dentro do form e correr pro abraco, sem encher o saco de ninguem de basis.