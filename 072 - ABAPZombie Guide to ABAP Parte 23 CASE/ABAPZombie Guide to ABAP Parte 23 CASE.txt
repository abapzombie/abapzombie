ABAPZombie Guide to ABAP ‚Äì Parte 23 ‚Äì CASE
Autor: Mauricio Cruz
Data: 17/05/2011 14:18

Corre negada! A zumbizada est√° vontando!
Estive um pouco ausente nas √∫ltimos semanas‚Ä¶ mas estou de volta, e com v√°rios outros posts para continuar ajudando (ou atrapalhando, vai saber) o povo por ae üòÄ .
Vamos l√°!
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äì
Eu gosto de CASEs. CASEs s√£o legais. CASEs s√£o ‚Äúnice‚Äù. CASEs funcionam. CASEs, muitas vezes, evitam estruturas malucas com milh√µes de IFs. Estruturas como o CASE existem em diversas linguagens, ou seja: o neg√≥cio √© t√£o bom que
n√£o
pode faltar.
O que ele faz? Vamos primeiro ver a sua estrutura:
CASE valor
 WHEN valor/express√£o.
    "Execute algo
 WHEN valor/express√£o 2.
    "Execute algo
 WHEN OTHERs.
    "Execute algo
Simples!
Em
valor
, voc√™ vai colocar uma vari√°vel acess√≠vel naquele ponto do programa ou um valor qualquer. Voc√™ pode colocar qualquer n√∫mero de ‚ÄúWHENs‚Äù abaixo, indicando o valor ou a express√£o que far√° com que o programa entre naquele bloco. Caso nenhum dos ‚ÄúWHENs‚Äù que voc√™ colocou seja igual ao valor do CASE, a execu√ß√£o vai ser direcionada para o WHEN OTHERs. Veja S√≥:
REPORT  zombie_case.

* Vari√°vel
DATA: v_teste TYPE c.

*--------------------------------------------------------------------*
* Mais simples que o caso abaixo, imposs√≠vel :)
v_teste = 'A'.

CASE v_teste.
  WHEN 'A'.
*     Vai Cair Aqui
  WHEN 'B'.
  WHEN 'C'.
  WHEN 'D'.
  WHEN OTHERS.
ENDCASE.

*--------------------------------------------------------------------*
* Usando Express√µes no CASE
v_teste = 'D'.

CASE v_teste.
  WHEN 'A'.
  WHEN 'B'.
  WHEN 'C' OR 'D'.
*     Vai Cair Aqui
  WHEN OTHERS.
ENDCASE.

*--------------------------------------------------------------------*
* Uso do WHEN OTHERS!
v_teste = 'E'.

CASE v_teste.
  WHEN 'A'.
  WHEN 'B'.
  WHEN 'C'.
  WHEN 'D'.
  WHEN OTHERS.
*     N√£o tem E, ent√£o cai aqui
ENDCASE.

*--------------------------------------------------------------------*
* Maneira cool de usar o CASE com Radiobuttons
PARAMETERS: rb_one   RADIOBUTTON GROUP rb01,
            rb_two   RADIOBUTTON GROUP rb01,
            rb_three RADIOBUTTON GROUP rb01.

CASE 'X'.
  WHEN rb_one.
*     L√≥gica para o RadioButton 1
  WHEN rb_two.
*     L√≥gica para o RadioButton 2
  WHEN rb_three.
*     L√≥gica para o RadioButton 3
ENDCASE.
E qual a diferen√ßa desse tal CASE para um ‚ÄòIF‚Äô? Veja s√≥:
DATA: v_zumbi_que_me_persegue TYPE string.

* Linda estrutura com IFs na sequencia:

IF v_zumbi_que_me_persegue = 'ZUMBI1'.
ELSE.
  IF v_zumbi_que_me_persegue = 'ZUMBI1'.
  ELSE.
    IF v_zumbi_que_me_persegue = 'ZUMBI2'.
    ELSE.
      IF v_zumbi_que_me_persegue = 'ZUMBI3'.
      ELSE.
        IF v_zumbi_que_me_persegue = 'ZUMBI4'.
        ELSE.
          IF v_zumbi_que_me_persegue = 'ZUMBI5'.
          ELSE.
            IF v_zumbi_que_me_persegue = 'ZUMBI6'.
            ELSE.
              IF v_zumbi_que_me_persegue = 'ZUMBI7'.
              ELSE.
                IF v_zumbi_que_me_persegue = 'ZUMBI8'.
                ELSE.
                  IF v_zumbi_que_me_persegue = 'ZUMBI9'.
                  ELSE.
*                      Esse seria o WHEN OTHERS haha
                  ENDIF.
                ENDIF.
              ENDIF.
            ENDIF.
          ENDIF.
        ENDIF.
      ENDIF.
    ENDIF.
  ENDIF.
ENDIF.

* Legal n√©? Vou escrever a mesma coisa com o CASE

CASE v_zumbi_que_me_persegue.
  WHEN 'ZUMBI1'.
  WHEN 'ZUMBI2'.
  WHEN 'ZUMBI3'.
  WHEN 'ZUMBI4'.
  WHEN 'ZUMBI5'.
  WHEN 'ZUMBI6'.
  WHEN 'ZUMBI7'.
  WHEN 'ZUMBI8'.
  WHEN 'ZUMBI9'.
  WHEN OTHERS.
ENDCASE.

* Agora me diz: O QUE √â MAIS F√ÅCIL DE ENTENDER? HEIM? HEIM?
* *rage zombie detected*
And it‚Äôs done. Depois dessa acho que n√£o tem muito mais o que falar do case aqui.
Abra√ßos!



Coment√°rios:
Henrique Dias (17/05/2011 12:39): <pre lang="abap"> CASE 'X'. WHEN rb_one. *     L√≥gica para o RadioButton 1 WHEN rb_two. *     L√≥gica para o RadioButton 2 WHEN rb_three. *     L√≥gica para o RadioButton 3 ENDCASE. </pre> Isso √© a reversal russa do case auehauehaeuhaeuh