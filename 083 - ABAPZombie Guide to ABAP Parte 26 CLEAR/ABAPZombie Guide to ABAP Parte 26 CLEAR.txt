ABAPZombie Guide to ABAP ‚Äì Parte 26 ‚Äì CLEAR
Autor: Mauricio Cruz
Data: 25/07/2011 10:00

Ah, o CLEAR. Que programador nunca ficou debuggando 5horas para descobrir que
‚Äúfaltava um CLEAR‚Äù
? Eu j√° üôÅ
Tristezas dignas do
@ABAPdepressao
√† parte, vamos dar uma olhada nesse comando simples e comum no nosso dia-a-dia.
O CLEAR limpa. Preciso dizer mais alguma coisa?
REPORT  zombie_clear.

DATA: v_var TYPE i VALUE 10.

DATA: wa_struc TYPE mara.

DATA: t_table TYPE TABLE OF mara.

DATA: t_table_h TYPE TABLE OF mara WITH HEADER LINE.

* Limpou a vari√°vel
CLEAR v_var.

* Limpou a estrutura
CLEAR wa_struc.

* Limpou a tabela
APPEND INITIAL LINE TO t_table.
CLEAR t_table.

* Limpou a tab... O QUE! COMO ASSIM?!? N√ÉO LIMPOU?
APPEND INITIAL LINE TO t_table_h.
CLEAR t_table_h.
Pois √©, na verdade eu preciso dizer algumas coisas sim üôÇ
O
CLEAR vai levar a vari√°vel √† seu valor inicial
, de acordo com as regras do ABAP. O valor colocado com a adi√ß√£o VALUE para definir um valor inicial na declara√ß√£o, √© ignorado.(Ex. numa vari√°vel CHAR de 1 posi√ß√£o e valor default A, tem como valor inicial um espa√ßo, ou o valor hexadecimal 20).
O CLEAR limpa v√°rias coisas, mas tome cuidado para n√£o confundir o funcionamento nas
tabelas com e sem header line
.
Em tabelas
com header line
, o CLEAR ir√° limpar a linha de header da tabela, e n√£o o seu conte√∫do. Caso a tabela
n√£o tenha header line
, como √© o caso de T_TABLE no c√≥digo acima, o CLEAR ir√° limpar o conte√∫do da tabela. Rode o programa para testar üòÄ
Voc√™ ainda pode utilizar a adi√ß√£o
WITH
para ‚Äúlimpar‚Äù a vari√°vel utilizando o valor de outra vari√°vel, ou a adi√ß√£o
WITH NULL
para apagar de vez os valores hexadecimais da vari√°vel (vai ficar tudo 00).
E ainda tem mais: o
CLEAR faz quase a mesma coisa que o comando FREE
, ou seja, ele elimina o valor da vari√°vel da mem√≥ria do programa. Por√©m, os comandos diferem um pouco no tratamento de tabelas internas, onde o
CLEAR vai limpar a tabela mas n√£o vai liberar a mem√≥ria ocupada pelas linhas da tabela
. Ou seja, voc√™ vai limpar o conte√∫do, mas a √°rea de mem√≥ria vai continuar sendo ocupada pelo seu programa.
E quem diria que um comando t√£o simples teria tantas coisas para explicar, n√£o √©? üôÇ
Abra√ßos!