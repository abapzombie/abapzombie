ABAPZombie Guide to ABAP ‚Äì Parte 30 ‚Äì GET TIME
Autor: Mauricio Cruz
Data: 06/03/2012 15:30

Bom, j√° perdemos a ordena√ß√£o faz um tempo, ent√£o, a partir de hoje, vamos pegar comandos aleat√≥rios e j√° era üòÄ
GET TIME!
Comando simples que, quando utilizado sozinho, atualiza as vari√°veis de sistema
sy-datlo
,
sy-datum
,
sy-timlo
,
sy-uzeit
, e
sy-zonlo
com os valores correspondes ao hor√°rio do servidor.
Voc√™ tamb√©m pode jogar o hor√°rio direto numa vari√°vel do tipo ‚Äút‚Äù, com o
GET TIME FIELD [campo]
.
Veja o exemplo:
REPORT zombie_time.

‚Ä®‚Ä®DATA: l_time TYPE t.‚Ä®‚Ä®

* Atualiza as vari√°veis do Sistema de Data/Hora
‚Ä®GET TIME.

‚Ä®‚Ä®* Joga o hor√°rio atual numa vari√°vel qualquer
‚Ä®GET TIME FIELD l_time.‚Ä®‚Ä®

WRITE l_time.
Normalmente as vari√°veis de sistema est√£o sincronizadas com o hor√°rio do servidor, mas eu juro que eu vi um caso na vers√£o 4.6c onde o programa precisava usar o GET TIME, pois as vari√°veis estavam desatualizadas. Se algu√©m souber o motivo, comente a√≠ üôÇ
Abra√ßos!



Coment√°rios:
Lucas Antoni (08/03/2012 09:46): Custodio, Aqui no meu programa √© a mesma coisa, o sy-uzeit √© o mesmo valor no come√ßo e no fim do programa, sendo necess√°rio utilizar o GET TIME para atualizar o hor√°rio.
Custodio (08/03/2012 00:55): WRITE sy-uzeit. DO 50000000 TIMES. ENDDO. WRITE sy-uzeit. GET TIME. WRITE sy-uzeit. ************************SAIDA*********** 14:55:35 14:55:35 14:55:44
Custodio (08/03/2012 00:54): Entao eh mais estranho do que parece. meus testes aqui o sy-uzeit eh o mesmo no comeco e no fim do programa, soh muda se eu uso o get time. Estou na 7.02.
Mauricio Cruz (06/03/2012 20:21): Sim, eu vi o help, sempre olho para fazer esse tipo de post. Mas mas vers√µes mais novas do AS, isso da√≠ n√£o √© muito verdade‚Ä¶ Digo isso pq eu fiz o teste antes de postar üôÇ Fa√ßa um teste a√≠.. roda um DO de milh√µes de vezes fazendo um write no sy-uzeit, colocando alguma coisa dentro para demorar a execu√ß√£o. Ele muda o valor e write sai c/ o tempo correto! Particularmente, eu sempre usei sy-datum e sy-uzeit para colocar campos em tabelas, e nunca tive que usar o get time e nem tive problemas. S√≥ vi isso acontecer na 4.6c.. mas, como disse no post, n posso falar com certeza o porque disso tudo. Abra√ßos!
Custodio (06/03/2012 20:15): Esta la no help Mauricio: ‚ÄúNote Except for GET TIME, the system fields are updated after starting a program, after sending a screen, and after changing the internal mode. ‚Äù Ou seja, normalmente as variaveis nao sao atualizadas, digamos, ‚Äúreal time‚Äù, mas apenas nessas situacoes. Por isso que se vc imprimir sy-uzeit no comeco e no fim de um report que demora + de 1 segundo para executar, o valor sera o mesmo, a nao ser que vc use o get time. Quando vc debuga as variaveis sao atualizadas. Abraco.