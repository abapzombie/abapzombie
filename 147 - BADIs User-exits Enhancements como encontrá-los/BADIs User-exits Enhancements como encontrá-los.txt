BADIâ€™s, User-exits, Enhancementsâ€¦ como encontrÃ¡-los?
Autor: Daiane Medeiros
Data: 19/07/2012 14:00

Faaaala Zumbizada! Estou de volta no modo â€œzombie = ONâ€ por causa do projeto, testes integrados que estÃ£o acabando com a minha vida (e que nunca acabam!) ðŸ™
Bom, mas chega de mimimi e vamos lÃ¡!!! Neste post vou falar sobre alguns mÃ©todos para encontrar Enhancements, User-exits, BADIâ€™s e etc. Aposto que isso pode ajudar muito, principalmente para os zumbis mais novinhos. ðŸ™‚
NÃ£o, isso nÃ£o Ã© uma user-exitâ€¦
CALL CUSTOMER FUNCTION
VocÃª pode colocar um BREAK-POINT nesse comando, que Ã© usado para chamar as User-exits . JÃ¡ falamos dele aqui no blog e se quiser saber mais,
clique aqui
.
BADIâ€™S
MÃ©todo 1:
V_EXT_ACT e V_EXT_IMP
A BADI faz uma seleÃ§Ã£o nas tabelas de visÃµes V_EXT_ACT e V_EXT_IMP. EntÃ£o podemos ir na transaÃ§Ã£o ST05 -> Selecionar â€œSQL Traceâ€ e â€œTable Buffer Traceâ€ -> Activate Trace -> Executar a transaÃ§Ã£o -> Deactivate Trace -> Display Trace.
IrÃ¡ aparecer a tela abaixo:
Vamos selecionar os seguintes objetos:
No resultado final irÃ¡ mostrar todas as BADIâ€™s na ordem em que elas foram executadas:
MÃ©todo 2:
CL_EXITHANDLER=>GET_CLASS_NAME_BY_INTERFACE
Na transaÃ§Ã£o SE24, vamos selecionar a classe CL_EXITHANDLER, ir para o mÃ©todo GET_INSTANCE e colocar um BREAK-POINT.
AtravÃ©s do parÃ¢metro de exportaÃ§Ã£o EXIT_NAME Ã© possÃ­vel saber o nome da BADI que serÃ¡ chamada.
MÃ©todo 3:
FM SXV_GET_CLIF_BY_NAME.
Um outro mÃ©todo Ã© colocando um BREAK-POINT na funÃ§Ã£o SXV_GET_CLIF_BY_NAME, que Ã© chamada toda vez que alguma BADI Ã© executada.
O parÃ¢metro de exportaÃ§Ã£o NAME irÃ¡ mostrar o nome da BADI.
E aÃ­, achou difÃ­cil, chato, deprimente? NÃ£o se assuste, vou mostrar algumas ferramentas que podem facilitar a sua vida! ðŸ™‚
HÃ¡ algum tempo atrÃ¡s precisei encontrar uma user-exit de uma transaÃ§Ã£o X, e no meio de um fÃ³rum no SCN encontrei um programa bastante Ãºtil! Ele lista todas as user-exits e BADIâ€™s de uma transaÃ§Ã£o ou programa.
Abaixo estÃ¡ o cÃ³digo-fonte. NÃ£o sei quem Ã© o autor e nÃ£o serÃ¡ coincidÃªncia encontrar esse mesmo programa em outros fÃ³runs (Ã© bem manjado).
REPORT z_enhancement_finder NO STANDARD PAGE HEADING LINE-SIZE 201.

TABLES :  tstc,
          tadir,
          modsapt,
          modact,
          trdir,
          tfdir,
          enlfdir,
          sxs_attrt ,
          tstct.

DATA : jtab LIKE tadir OCCURS 0 WITH HEADER LINE.
DATA : field1(30).
DATA : v_devclass LIKE tadir-devclass.

PARAMETERS : p_tcode LIKE tstc-tcode,
p_pgmna LIKE tstc-pgmna .

DATA wa_tadir TYPE tadir.

START-OF-SELECTION.

  IF NOT p_tcode IS INITIAL.
    SELECT SINGLE * FROM tstc WHERE tcode EQ p_tcode.

  ELSEIF NOT p_pgmna IS INITIAL.
    tstc-pgmna = p_pgmna.
  ENDIF.

  IF sy-subrc EQ 0.
    SELECT SINGLE * FROM tadir
    WHERE pgmid = 'R3TR'
    AND object = 'PROG'
    AND obj_name = tstc-pgmna.

    MOVE : tadir-devclass TO v_devclass.

    IF sy-subrc NE 0.
      SELECT SINGLE * FROM trdir
      WHERE name = tstc-pgmna.
      IF trdir-subc EQ 'F'.
        SELECT SINGLE * FROM tfdir
        WHERE pname = tstc-pgmna.

        SELECT SINGLE * FROM enlfdir
        WHERE funcname = tfdir-funcname.

        SELECT SINGLE * FROM tadir
        WHERE pgmid = 'R3TR'
        AND object = 'FUGR'
        AND obj_name EQ enlfdir-area.

        MOVE : tadir-devclass TO v_devclass.
      ENDIF.
    ENDIF.

    SELECT * FROM tadir INTO TABLE jtab
    WHERE pgmid = 'R3TR'
    AND object IN ('SMOD', 'SXSD')
    AND devclass = v_devclass.

    SELECT SINGLE * FROM tstct
    WHERE sprsl EQ sy-langu
    AND tcode EQ p_tcode.

    FORMAT COLOR COL_POSITIVE INTENSIFIED OFF.
    WRITE:/(19) 'Transaction Code - ',
    20(20) p_tcode,
    45(50) tstct-ttext.
    SKIP.
    IF NOT jtab[] IS INITIAL.
      WRITE:/(105) sy-uline.
      FORMAT COLOR COL_HEADING INTENSIFIED ON.

*      sorting the internal table
      SORT jtab BY object.
      DATA : wf_txt(60) TYPE c,
      wf_smod TYPE i ,
      wf_badi TYPE i ,
      wf_object2(30) TYPE c.
      CLEAR : wf_smod, wf_badi , wf_object2.

*GET the total smod.
      LOOP AT jtab INTO wa_tadir.
        AT FIRST.
          FORMAT COLOR COL_HEADING INTENSIFIED ON.

          WRITE:/1 sy-vline,
          2 'Enhancement/ Business Add-in',
          41 sy-vline ,
          42 'Description',
          105 sy-vline.
          WRITE:/(105) sy-uline.
        ENDAT.
        CLEAR wf_txt.
        AT NEW object.
          IF wa_tadir-object = 'SMOD'.
            wf_object2 = 'Enhancement' .
          ELSEIF wa_tadir-object = 'SXSD'.
            wf_object2 = ' Business Add-in'.

          ENDIF.
          FORMAT COLOR COL_GROUP INTENSIFIED ON.

          WRITE:/1 sy-vline,

          2 wf_object2,
          105 sy-vline.
        ENDAT.

        CASE wa_tadir-object.
          WHEN 'SMOD'.
            wf_smod = wf_smod + 1.
            SELECT SINGLE modtext INTO wf_txt
            FROM modsapt
            WHERE sprsl = sy-langu
            AND name = wa_tadir-obj_name.
            FORMAT COLOR COL_NORMAL INTENSIFIED OFF.

          WHEN 'SXSD'.
*        for badis
            wf_badi = wf_badi + 1 .
            SELECT SINGLE text INTO wf_txt
            FROM sxs_attrt
            WHERE sprsl = sy-langu
            AND exit_name = wa_tadir-obj_name.
            FORMAT COLOR COL_NORMAL INTENSIFIED ON.
        ENDCASE.

        WRITE:/1 sy-vline,
        2 wa_tadir-obj_name HOTSPOT ON,
        41 sy-vline ,
        42 wf_txt,
        105 sy-vline.
        AT END OF object.
          WRITE : /(105) sy-uline.
        ENDAT.
      ENDLOOP.

      WRITE:/(105) sy-uline.

      SKIP.
      FORMAT COLOR COL_TOTAL INTENSIFIED ON.
      WRITE:/ 'No.of Exits:' , wf_smod.
      WRITE:/ 'No.of BADis:' , wf_badi.

    ELSE.
      FORMAT COLOR COL_NEGATIVE INTENSIFIED ON.
      WRITE:/(105) 'No userexits or BADis exist'.
    ENDIF.
  ELSE.
    FORMAT COLOR COL_NEGATIVE INTENSIFIED ON.
    WRITE:/(105) 'Transaction does not exist'.
  ENDIF.

AT LINE-SELECTION.

  DATA : wf_object TYPE tadir-object.
  CLEAR wf_object.

  GET CURSOR FIELD field1.
  CHECK field1(8) EQ 'WA_TADIR'.
  READ TABLE jtab WITH KEY obj_name = sy-lisel+1(20).
  MOVE jtab-object TO wf_object.

  CASE wf_object.
    WHEN 'SMOD'.
      SET PARAMETER ID 'MON' FIELD sy-lisel+1(10).

      CALL TRANSACTION 'SMOD' AND SKIP FIRST SCREEN.
    WHEN 'SXSD'.
      SET PARAMETER ID 'EXN' FIELD sy-lisel+1(20).
      CALL TRANSACTION 'SE18' AND SKIP FIRST SCREEN.
  ENDCASE.
Encontrei tambÃ©m esse outro relatÃ³rio abaixo. O cÃ³digo-fonte estÃ¡
aqui
. Basicamente, tem a mesma funcionalidade, mas eu particularmente prefiro o anterior.
Outras ferramentas
SNIF
E vocÃª pode estar se perguntando: â€œnÃ£o existe nenhum relatÃ³rio standard?â€. Sim, existe! A SAP disponibiliza o SNIF (esse Ã© o nome do programa, nÃ£o da transaÃ§Ã£o) que lista todos os Costumer Enhancements ativos:
ABAP X-RAY EYE
Pesquisando um pouco mais encontrei um â€œSNIF melhoradoâ€, que inclui algumas opÃ§Ãµes, como por exemplo, exits para ValidaÃ§Ã£o e SubstituiÃ§Ã£o, fÃ³rmulas (VOFM), Screen-exits e Field-exits. Esse projeto estÃ¡ disponÃ­vel neste link:
http://code.google.com/p/abapexitrayeye/
e para implementÃ¡-lo vocÃª precisarÃ¡ usar o
SAP Link
.
Links Ãšteis:
WIKI: Enhancements and Modifications â€“ BADI, Enhancement Framework, User Exits, BTE
WIKI: Ways to find a userexit



ComentÃ¡rios:
Rafael Martin (24/06/2022 10:32): Excelente POST, muito obrigado
Fernando Castro (01/06/2021 12:23): Ã“timo post, parabÃ©ns!
Fernando Castro (11/11/2020 16:36): Ã“timo post, parabÃ©ns.
Diego Henrique da Silva (24/07/2020 16:07): Criei um ponto de ampliaÃ§Ã£o  ZTM_REFERENCIA_TRANSP na BADI ( BADI_SD_BILLING ), agora preciso criar uma implementaÃ§Ã£o, quando clico para criar ele pede pra digitar uma definiÃ§Ã£o BADI e nÃ£o sei oq digitar neste campo, podem me ajudar ?
Renan (11/07/2016 08:22): Vlw Daiane, vou trabalhar com BADIâ€™s pela primeira vez hoje, e nÃ£o tenho nenhuma ideia de qual BADI devo usar para transferÃªncia de material, como descubro uma BADI que servirÃ¡ para mim, sem saber onde ela jÃ¡ foi usada ? oh god!
Estevam Vieira (13/12/2013 08:34): Bom dia, Daiane! ParabÃ©ns pela inÃ­ciativa, seu site Ã© demais, e uma Ã³tima ferramenta. Gostaria de saber se vocÃª poderia me indicar dois ABAPs, eu preciso de Trainee/Jr para regiÃ£o do Morumbi e Pleno para regiÃ£o da Av. Paulista. Meu email Ã© rh@vitroit.com.br Muito Obrigado!
Robson (25/11/2012 14:25): Muito bacana o post! SÃ³ um detalhe: o link â€œclique aquiâ€ do item â€œCALL CUSTOMER FUNCTIONâ€ estÃ¡ quebrado. Abs!
  Mauricio Cruz (28/11/2012 10:48): Opa, corrigido. Valeu Robson!
  Mauricio Cruz (28/11/2012 10:48): Opa, corrigido. Valeu Robson!
AndrÃ©a (11/11/2012 09:12): Aii que orgulho, DAIII! Nunca tinha lido um post da sua autoria, mujer! Congrats! Adorei ðŸ™‚ E me ajudou muito a relembrarâ€¦ Ai ai, dÃ¡ uma saudade e um aperto no meu coraÃ§Ã£o ver cÃ³digo ABAP.. Mais do que eu sinto saudade da minha familia. E eu gostaria de estar brincando hahahaha ðŸ˜›
Vinicius (20/09/2012 11:35): Meu mÃ©todo favorito Ã© buscando no SDN! :p Outra forma tambem Ã© usando a boa e velha SE84 -> Enhancements -> Business Add-ins -> Definitions -> e ai busco pelo pacote da transaÃ§Ã£o (ME, por exemplo). O mesmo serve pra customer-exits ðŸ™‚
Danilo Cardoso (05/09/2012 19:10): Fala galera! Esse post  ficou muito loko Daiane! Eu tbm nÃ£o manjava esses relatÃ³rios nÃ£o. Curto muito aprender essas paradas, obrigado pelas dicas. Estava em conversa com a nossa amiga do coraÃ§Ã£o, Priscila Silva. FalÃ¡vamos justamente sobre como encontrar BAdIs no sistema e eu escrevi um e-mail para ela detalhando dois mÃ©todos. Mas nÃ£o postarei o e-mail aqui, pois, alÃ©m de ser uma informaÃ§Ã£o redundante, eu escrevi em inglÃªs (sÃ³ de brincaiderinha..rs) e utilizei muitas gÃ­rias do Bronx â€¦ algumas pessoas podem achar meio nocivo (mas a Pri riu pra caramba .. rs). AbraÃ§os.
  Mauricio Cruz (05/09/2012 22:53): SERIOUSLY, ARE YOU KIDDING ME ?!? PUT THAT MOTHERFUCKING BREAK POINT IN THE MOTHERFUCKING CALL-CUSTOMER FUNCTION INSTRUCTION OR Iâ€™LL SHOOT YOU IN YOUR GODDAMN FACE! (foi also assim? heoauheoahe)
  Mauricio Cruz (05/09/2012 22:53): SERIOUSLY, ARE YOU KIDDING ME ?!? PUT THAT MOTHERFUCKING BREAK POINT IN THE MOTHERFUCKING CALL-CUSTOMER FUNCTION INSTRUCTION OR Iâ€™LL SHOOT YOU IN YOUR GODDAMN FACE! (foi also assim? heoauheoahe)
Mauricio Cruz (23/07/2012 10:16): Animal o post Daiane, eu nÃ£o manjava desses relatÃ³rios nÃ£oâ€¦ eu sou meio old-school, sempre tento acha exits c/ os break-points em funÃ§Ãµes e etcs! haha. Mas talvez eu tenha que mudar um pouco, esses relatÃ³rios que vocÃª postou me parecem muito Ãºteis! Viva o Open Source, e valeu pelo post!
Renato Bonini (20/07/2012 16:23): SÃ³ um pitaco para achar BADIs, standardsâ€¦ Por â€œpadrÃ£oâ€ as Classes Standard da SAP para BADIs tem a nomenclatura â€œCL_EX_xxxxxxxxâ€. Desta forma, acessando a transaÃ§Ã£o SE24 e buscar por â€œCL_EX_*â€, no campo nome da classe. Vai listar quase todas as BADIsâ€¦ e caso vocÃª nÃ£o consiga chegar na BADI em si pela SE24. Use o complemento do nome da classe na SE18 ou SE19, exemplo: classe: CL_EX_AC_DOCUMENT    => BADI: AC_DOCUMENT []s