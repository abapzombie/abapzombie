Valida√ß√£o de CPF / CNPJ
Autor: Mauro Laranjeira
Data: 17/12/2012 15:22

Certo Zombizada?!
Essa √© para a garotada que se mata convertendo fun√ß√£o de JavaScript para ABAP. (pior que ja vi)
Por favor, menino Zombie, use as fun√ß√µes:
CONVERSION_EXIT_CPFBR_INPUT ‚Äì Validar CPF
CONVERSION_EXIT_CGCBR_INPUT ‚Äì Validar CNPJ
Abra√ßos a todos, for√ßa anti-zumbie.



Coment√°rios:
How do we use the CBD Bath Bombs? (17/11/2021 23:44): Good Afternoon everybody ! can anyone recommend where I can purchase Kats Naturals CBD Topical Skin Serum 125mg 250mg?
Leonardo Moreira (25/05/2021 15:36): Usei o dom√≠nio J_1BCPF direto na estrutura do ALV, para fazer as conversoes de input e output automaticamente na sa√≠da do ALV, por√©m,  na sa√≠da do ALV o campo apresenta o seguinte formato: 137.269.330-18000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 Algu√©m poderia me ajudar a como exibir somente o CPF sem os zeros a direita?
Eduardo Henrique (11/07/2019 11:31): Sei que este post √© antigo, mas tenho duas maneiras de validar o CPF que podem ajudar. usando a fun√ß√£o do post e tamb√©m usando uma de HR. Fica pro registro hist√≥rico. Eu estou usando a vers√£o 1 em alguns desenvolvimentos, por√©m a vers√£o 2 √© √∫til porque a fun√ß√£o j√° formata ou tira a formata√ß√£o do CPF se necess√°rio, e verifica o digito na fun√ß√£o. Vers√£o 1 (M√©todo VALIDAR_CPF): ASSINATURA: Entrada: VALUE( I_CPF )	        TYPE STCD2	CPF Retorno: VALUE( R_ERRO )	TYPE FLAG_X	Flag METHOD validar_cpf. DATA: lv_temp  TYPE p, lv_idx     TYPE sy-tabix VALUE 9, lv_idx1   TYPE sy-tabix, lv_ver     TYPE c VALUE ‚Äò0‚Äô. CALL FUNCTION ‚ÄòCONVERSION_EXIT_CPFBR_INPUT‚Äô EXPORTING input     = i_cpf EXCEPTIONS not_valid = 1 OTHERS    = 2. IF sy-subrc IS NOT INITIAL. r_erro = ‚ÄòX‚Äô. EXIT. ENDIF. CHECK r_erro IS INITIAL. DO 10 TIMES. ‚ÄúValida n√∫meros repetidos IF i_cpf CO lv_ver . r_erro = ‚ÄòX‚Äô. EXIT. ENDIF. ADD 1 TO lv_ver. ENDDO. CHECK r_erro IS INITIAL. DO 2 TIMES. ‚ÄúValida digitos CLEAR: lv_idx1, lv_temp. WHILE lv_idx1 = 10. CLEAR lv_temp. ENDIF. IF lv_temp  i_cpf+lv_idx(1). r_erro = ‚ÄòX‚Äô. EXIT. ENDIF. ADD 1 TO lv_idx. ENDDO. ENDMETHOD. Vers√£o 2: (REPORT ZVALIDAR_CPF) TYPE-POOLS: pbr99. PARAMETERS: cpf TYPE pbr99_cpf. DATA: ‚Äúcpf_for TYPE pbr99_cpf, ‚Äúcpf_raw TYPE pbr99_cpf, cpf_unf TYPE pbr99_cpf, dig     TYPE n. START-OF-SELECTION. CALL FUNCTION ‚ÄòHR_BR_CHECK_CPF_FORMAT‚Äô EXPORTING cpf_number               = cpf IMPORTING ‚Äúcpf_number_formatted     = cpf_for ‚Äúcpf_number_raw           = cpf_raw cpf_unformatted          = cpf_unf EXCEPTIONS cpf_format_not_supported = 1 cpf_check_digit          = 2 OTHERS                   = 3. IF sy-subrc  0. MESSAGE ‚ÄòErro no CPF‚Äô TYPE ‚ÄòS‚Äô DISPLAY LIKE ‚ÄòE‚Äô. LEAVE LIST-PROCESSING. ELSE. DO 10 TIMES. IF cpf_unf(11) CO dig. MESSAGE ‚ÄòErro no CPF‚Äô TYPE ‚ÄòS‚Äô DISPLAY LIKE ‚ÄòE‚Äô. LEAVE LIST-PROCESSING. ENDIF. ADD 1 TO dig. ENDDO. ENDIF.
  Mauro Laranjeira (11/07/2019 11:43): Eduardo, Obrigado por sua contribui√ß√£o o post √© antigo mas sempre ajuda. üòâ Para colocar a formata√ß√£o tamb√©m temos a fun√ß√£o de output (CONVERSION_EXIT_CPFBR_OUTPUT). Muito obrigado
    Paula Santiago (05/08/2019 16:52): Muito bom, fui ajudar um colega agora e apesar de antigo, j√° se tornou atual de novo! heheeheh Obrigada
    Paula Santiago (05/08/2019 16:52): Muito bom, fui ajudar um colega agora e apesar de antigo, j√° se tornou atual de novo! heheeheh Obrigada
  Mauro Laranjeira (11/07/2019 11:43): Eduardo, Obrigado por sua contribui√ß√£o o post √© antigo mas sempre ajuda. üòâ Para colocar a formata√ß√£o tamb√©m temos a fun√ß√£o de output (CONVERSION_EXIT_CPFBR_OUTPUT). Muito obrigado
    Paula Santiago (05/08/2019 16:52): Muito bom, fui ajudar um colega agora e apesar de antigo, j√° se tornou atual de novo! heheeheh Obrigada
    Paula Santiago (05/08/2019 16:52): Muito bom, fui ajudar um colega agora e apesar de antigo, j√° se tornou atual de novo! heheeheh Obrigada
Gilson (03/06/2016 09:51): Maur√£o, para CNPJ tem a fun√ß√£o HR_BR_CHECK_CGC_FORMAT
  Mauro Laranjeira (03/06/2016 10:18): E ae Gilson, de boas? O problema √© que ela faz parte do pacote de HR, no meu atual projeto temos 4 ambientes diferentes da SAP, esta fun√ß√£o n√£o esta presente em todos. Porem consegui fazer alguns testes no ECC, rola mesmo. Vlw pela dica. Abs, Mauro Laranjeira
  Mauro Laranjeira (03/06/2016 10:18): E ae Gilson, de boas? O problema √© que ela faz parte do pacote de HR, no meu atual projeto temos 4 ambientes diferentes da SAP, esta fun√ß√£o n√£o esta presente em todos. Porem consegui fazer alguns testes no ECC, rola mesmo. Vlw pela dica. Abs, Mauro Laranjeira
Janaina (19/04/2016 12:45): Essa fun√ß√£o √© a mais completa. HR_BR_CHECK_CPF_FORMAT
  Mauro Laranjeira (19/04/2016 13:59): Janaina, Curti essa fun√ß√£o pelo fato dela retornar o valor com mascara. Mas pelo que vi ela n√£o valida CNPJ e so existe no ambiente com HR. Fiz alguns testes em ambientes sem HR e n√£o tem mesmo. Vlw pela dica. Abs, Mauro Laranjeira
  Mauro Laranjeira (19/04/2016 13:59): Janaina, Curti essa fun√ß√£o pelo fato dela retornar o valor com mascara. Mas pelo que vi ela n√£o valida CNPJ e so existe no ambiente com HR. Fiz alguns testes em ambientes sem HR e n√£o tem mesmo. Vlw pela dica. Abs, Mauro Laranjeira
Alexandre Alves (13/11/2013 16:12): Essa fun√ß√£o n√£o valida se o CPF for 11111111111, 22222222222, 33333333333. pois eles s√£o validos pelo modulo 11
  Mauro Laranjeira (13/11/2013 16:24): Muito bem observado meu Alexandre. √â necess√°rio fazer esta valida√ß√£o. Abs
    Funcional RE (20/01/2016 14:56): Ta errado, mano‚Ä¶
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
    Funcional RE (20/01/2016 14:56): Ta errado, mano‚Ä¶
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
  Mauro Laranjeira (13/11/2013 16:24): Muito bem observado meu Alexandre. √â necess√°rio fazer esta valida√ß√£o. Abs
    Funcional RE (20/01/2016 14:56): Ta errado, mano‚Ä¶
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
    Funcional RE (20/01/2016 14:56): Ta errado, mano‚Ä¶
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?
      Mauro Laranjeira (20/01/2016 15:00): Cara.. Acabei de testar aqui no ambiente em que estou alocado, funcionou. Qual o problema que vc esta tendo?