CRM_ORDER_MAINTAIN Nunca mais, UFA!
Autor: Mauro Laranjeira
Data: 30/04/2014 15:36

Ol√° pequeno aprendiz de cria√ß√£o de DUMP.
Para voc√™ que √©
vida loka
do SAP CRM, sabe como a SAP
zuou geral quando
desenvolveu a fun√ß√£o CRM_ORDER_MAINTAIN, diversos par√¢metros para preenchimento e precisamos contar com a sorte para o funcionamento. Como alternativa podemos usar a orienta√ß√£o a objetos da camada BOL.
Leia mais sobre a camada BOL neste post
.
Quem desenvolve no SAP CRM ¬†acaba se acostumando com o fabuloso mundo das classes e entities, at√© se esbarrar em uma BADI e acaba se entregando a fun√ß√£o CRM_ORDER_MAINTAIN.
Pois bem amiguinho zumbie, h√° esperan√ßas.
Segue um exemplo de uma implementa√ß√£o da BADI ORDER_SAVE
DATA: o_entity TYPE REF TO cl_crm_bol_entity.

 o_entity = cl_crm_bol_core=>get_instance( )->get_root_entity( iv_object_name = 'BTAdminH'
                                                               iv_object_guid = iv_guid ).
Assim podemos utilizar a camada BOL para inserir, alterar e deletar objetos da ordem.
Lembrando sempre de usar o modify da classe CL_CRM_BOL_CORE para as altera√ß√µes serem efetivas. Exemplo:
cl_crm_bol_core=>get_instance( )->modify( ).
CORRE√á√ÉO
A partir do SAP CRM 713 com Support Package 005 (SAPKU71305), a utiliza√ß√£o da camada BOL dentro da BADI ORDER_SAVE n√£o √© recomendado üôÅ pois o RAISE DO_NOT_SAVE n√£o funciona. Segue a nota
1931099 ‚Äì Implementation of Badi ORDER_SAVE does not Work in WebUI
com a explica√ß√£o SAP.
Liberte-se da CRM_ORDER_MAINTAIN.
Abra√ßos a todos