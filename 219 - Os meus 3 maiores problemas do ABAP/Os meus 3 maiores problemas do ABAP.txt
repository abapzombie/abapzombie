Os (meus) 3 maiores problemas do ABAP
Autor: Leo Schmidt
Data: 10/05/2016 10:00

Eu estava fazendo as contas aqui e percebi que ano que vem eu completo DEZ ANOS trabalhando com SAP (nove como ABAP). Esse tempo nÃ£o Ã© muita coisa quando comparado com muita gente do mercado aÃ­ (incluindo a galera que a gente
entrevistou recentemente no
podcast
), mas ainda assim eu diria que Ã© uma experiÃªncia pelo menos relevante. Nesse tempo, eu consegui aprender bastante sobre a linguagem ABAP, suas caracterÃ­sticas e suas limitaÃ§Ãµes. Por isso, dessa vez eu quero fazer um
post
menos tÃ©cnico e mais estilÃ£oÂ jornalismo-de-listinha-
buzzfeed
pra desabafar sobre 3 aspectos do trabalho com ABAPÂ que eu particularmente considero muito ruins.Â Eu restringi a trÃªs grandes problemas porque sempre dÃ¡ pra ficar listando MILHARES de coisas como
esse jÃ¡ clÃ¡ssico
post
sobre o PHP
, e eu nÃ£o quero fazer isso aqui porque eu nÃ£o sou nenhum â€œguru do ABAPâ€. Muito menos vim pra oferecer soluÃ§Ãµes. Eu sÃ³ vim pra bater no cÃ©rbero. EntÃ£o vamos lÃ¡:
1. O programador ABAP tem atribuiÃ§Ãµes de DBA
Ã‰ claro que a maior parte das atribuiÃ§Ãµes de DBA no SAP cabe ao Basis, por causa da prÃ³pria natureza e volume do trabalho. O Basis instala, configura, faz
backup
, restaura
backup
, gerencia usuÃ¡rios e autorizaÃ§Ãµes e monitora e ajusta a performance do banco de dados ligado ao SAP. Inclusive, eu diria que Ã© bem raro ou talvez quase impossÃ­velÂ encontrar no mundo SAP a figura do
devops
, que Ã© muito mais comum quando se trabalha com outras plataformas/linguagens, porque dentro do SAP isso representaria um conjunto de conhecimentos e responsabilidades muito grande para apenas um cargo.
PORÃ‰M, algumasÂ das atribuiÃ§Ãµes mais importantes do DBA acabam ficando na mÃ£o do programador, que sÃ£o justamente as tarefas de planejar e implementar tabelas, Ã­ndices e demais objetos do banco. O desenvolvedor ABAP fica responsÃ¡vel por isso porque:
Ã© necessÃ¡ria uma chave de desenvolvedor para realizar estas tarefas, o que o programador ABAP jÃ¡ tem e portanto seria dispendioso alocar outro recurso com outraÂ chave somente para tal;
a integraÃ§Ã£o clÃ¡ssica do banco de dados com o SAP faz com que muitas das ferramentas de desenvolvimento do banco de dadosÂ sejam abandonadas, porque:
as funÃ§Ãµes dessas ferramentas estÃ£o nasÂ transaÃ§Ãµes que manipulam o dicionÃ¡rio de dados (por exemplo,Â a SE11), ou
os dadosÂ sÃ£o tratados diretamente nas aplicaÃ§Ãµes, seja por causa daÂ prÃ³pria arquitetura e do OpenSQL ou por problemas de performanceÂ (isso mudou com o HANA, mas o problema persiste).
Isso geralmente configura um problema porque
nem todo programador Ã© um bom DBA.
Quantas vezes vocÃªs jÃ¡ se depararam com os seguintes problemas, sejam em objetos Z ou
standard
?
Elemento de dados sem descriÃ§Ã£o nem texto nenhum, obrigando o ABAP a criar textos no programa.
Campos de tabela com nome genÃ©rico sem descriÃ§Ã£o (por causa tambÃ©m do problema acima), que ninguÃ©m sabe para que servem.
Campos de tabelaÂ com dados errados porque o domÃ­nio foi criado sem nenhuma restriÃ§Ã£o de entrada ou com o tipo errado, e a aplicaÃ§Ã£o nÃ£o valida as entradas.
TabelasÂ desnormalizadas (dados de cabeÃ§alho no item, campos faltando na chave, campos sobrando na chave, etc.).
Registros em tabelas de item sem referÃªncia na tabela de cabeÃ§alho, porque nÃ£o hÃ¡ chave externa.
Quando existem errosÂ na definiÃ§Ã£o de tabelas, Ã­ndices, relacionamentos, entidades e demais objetos do banco,
a(s) aplicaÃ§Ã£o(Ãµes) Ã© queÂ tem que contornar tudo.
E isso significa muito mais trabalho, que poderia ser evitado. Eu acredito que esses erros nÃ£o surgem necessariamente porque as pessoas nunca tem um bom entendimento sobreÂ banco de dados, mas com certeza porque elas sÃ£o OBRIGADAS a realizar essas atividades. Esse Ã© o problema.
2. APIs em ABAP que nÃ£o existem ou funcionam pela metade
Ã‰ fato que uma grande parte da funcionalidade existente em ABAP nÃ£o estÃ¡ disponÃ­vel atravÃ©s de APIs. Isso nÃ£o Ã© uma constataÃ§Ã£o minha, mas simÂ do prÃ³prio diretor executivo da SAP para produtos e inovaÃ§Ã£o, BjÃ¶rn Goerke,
em seu blog
(sim, Ã© aquele mesmo
post
mitolÃ³gicoÂ que eu menciono no
segundo episÃ³dio do nosso
podcast
).
OÂ motivo disso ser umÂ problema Ã© Ã³bvio, mas vamos fazer um experimento mental:Â vocÃª jÃ¡ imaginou ter que recriar um relatÃ³rio com a cara de um ALV porÃ©m SEM USAR AS FUNÃ‡Ã•ES OUÂ CLASSES DE ALV? Eu nem sei dizer quantos MESES eu estimaria pra fazer uma coisa desse tipo. Isso mostra a funcionalidade prÃ¡tica das APIs:
elas servem para que se escreva cÃ³digo mais conciso, de maneira muito mais rÃ¡pida.
Ã‰ claro que existem APIs para muitas coisas em ABAP, e eu nem saberia listar todas. ALV, XML, BAPI,
CL_GUI_FRONTEND_SERVICES
, sÃ£o sÃ³ algumas que eu consigo citar de cabeÃ§a. O problema que eu quero desenhar aqui Ã© outro: faltam APIs para certas tarefas bÃ¡sicas em ABAP, e muitas das APIs que existem nÃ£o funcionam como Ã© esperado.
â€œMas como assim, tarefas bÃ¡sicas?â€ Vou tentar dar um exemplo. Algum tempo atrÃ¡s uns amigos meus comentaram sobre uma questÃ£o de um teste de programaÃ§Ã£o, onde havia umÂ mÃ©todoÂ que, dadas duas palavras, respondia se sÃ£o anagramas entre si. EntÃ£o, cada um comeÃ§ou a reimplementar esseÂ mÃ©todo em sua linguagem preferida ou do dia-a-dia. Um deles implementou em Ruby:
def anagram? (word1, word2)
  word1.chars.sort.join == word2.chars.sort.join
  end
Uma linha de mÃ©todo. Depois, veio o .NET:
static bool isAnagram (string a, string b)
{
    return a.ToCharArray().OrderBy(c => c).Sum(c => c) == b.ToCharArray().OrderBy(c => c).Sum(c => c);
}
SÃ³ uma linha tambÃ©m. Java?
public static Boolean isAnagram(String s1, String s2){
    return Arrays.equals(s1.toLowerCase().chars().sorted().toArray(), s2.toLowerCase().chars().sorted().toArray());
}
Que surpresa, UMA LINHA. AlÃ©m de tudo, todos aqui tem mais ou menos a mesma idÃ©ia: pegue a
string
, separe por caracteres, ordene e jogue tudo num
array
, depois retorne o resultado da comparaÃ§Ã£o dos
arrays
.
Vamos ver o ABAP. Primeiro, versÃ£o <= 7.31:
CLASS-METHODS: is_anagram
                   IMPORTING
                     s1 TYPE string
                     s2 TYPE string
                   RETURNING VALUE(result) TYPE abap_bool.

***

  METHOD is_anagram.

    DATA: _s1    TYPE string,
          _s2    TYPE string,
          offset TYPE i.

    result = abap_true.

    IF strlen( s1 ) <> strlen( s2 ).
      result = abap_false.
    ELSE.
      _s1 = to_lower( s1 ).
      _s2 = to_lower( s2 ).
      DO strlen( s1 ) TIMES.
        offset = sy-index - 1.
        IF count( val = _s1 sub = _s1+offset(1) ) <> count( val = _s2 sub = _s1+offset(1) ).
          result = abap_false.
          EXIT.
        ENDIF.
      ENDDO.
    ENDIF.

  ENDMETHOD.
Vamos tentar
ofuscar
simplificar um pouco as coisas com a 7.4? Vamos:
CLASS-METHODS: is_anagram_740
                   IMPORTING
                     s1 TYPE string
                     s2 TYPE string
                   RETURNING VALUE(result) TYPE abap_bool.

***

  METHOD is_anagram_740.

    result = boolc(
      strlen( s1 ) = strlen( s2 ) AND
      REDUCE i(
        LET _s1 = to_lower( s1 )
            _s2 = to_lower( s2 ) IN
        INIT diff = 0
        FOR off = 0 UNTIL off > strlen( s1 ) - 1
        NEXT diff = diff + COND i( WHEN count( val = _s1 sub = _s1+off(1) ) = count( val = _s2 sub = _s1+off(1) ) THEN 0 ELSE 1 )
      ) = 0
    ).

  ENDMETHOD.
Percebam bem que nessas implementaÃ§Ãµes eu:
nÃ£o usei tabelas, somente
strings
ou inteiros ou â€œbooleanos ABAPâ€;
usei as funÃ§Ãµes de manipulaÃ§Ã£o de
string
mais adequadas que eu pude;
sem tabelas nem ordenaÃ§Ã£o, acabei usandoÂ outra lÃ³gica: comparar comprimentos e as contagens das letras entre as duas palavras;
me esforcei bastante pra fazer tudo em um Ãºnico comando na implementaÃ§Ã£o 7.4.
Ã‰ claro que a ENORME diferenÃ§a entre as minhas implementaÃ§Ãµes em ABAP e as implementaÃ§Ãµes das outras linguagens se devem a um grande nÃºmero de fatores estranhos do ABAP, entre eles a inexistÃªncia de
arrays
clÃ¡ssicos, a verbosidade (e olha que o Java Ã© bem verboso, hem), a implementaÃ§Ã£o esquisita de OO, etc.Â PorÃ©m, notemÂ que apesar dessaÂ questÃ£o vir de um teste de programaÃ§Ã£o, elaÂ representa uma sÃ©rie de problemas cotidianos que todos nÃ³s enfrentamos corriqueiramente ao manipular
strings
em ABAP.
E ainda que eu tenha usado 3 funÃ§Ãµes diferentes de manipulaÃ§Ã£o de
string
(que eu tenho certezaÂ que muita gente nem sabeÂ que EXISTEM), nÃ£o Ã© uma soluÃ§Ã£o nada concisa. EÂ dÃ¡ pra pensar em diversos outros casos de problemas triviais assim que tambÃ©m nÃ£o tem soluÃ§Ãµes simples. O que dizer, por exemplo, da manipulaÃ§Ã£o de datas e horÃ¡rios? Do
batch input
? E de outras coisas nÃ£o tÃ£o triviais, como o paralelismo?
O outro viÃ©s desse problema Ã© quando as APIs existem, mas nÃ£o funcionam completamente. Eu jÃ¡ falei aqui no
blog
sobre
query services
e seus diversos problemas
.Â NÃ£o Ã© difÃ­cil encontrar casos de BAPIs no ECC que, segundo a documentaÃ§Ã£o, nÃ£o estejam liberadas completamente para uso. Ou mesmo produtos COMPLETAMENTE semÂ APIs. Eu trabalhei recentemente customizandoÂ uma aplicaÃ§Ã£oÂ chamada
SUS (
Supplier Self-Services
)
para um cliente. Apesar dessa soluÃ§Ã£o ter seus prÃ³prios dados e documentos, diferentes dos que estÃ£o no ECC, nÃ£o existe NENHUM tipo de BAPI para interagir com esses registros. VocÃª fica relegado a tentar decifrar as funÃ§Ãµes
standard
da prÃ³pria aplicaÃ§Ã£o para poder ampliÃ¡-la, gastando um tempo enorme e Ã s vezes chegando Ã  conclusÃ£o que nÃ£o dÃ¡ para utilizar nenhuma delas e Ã© melhor fazer tudo Z.
3. NÃ£o existe documentaÃ§Ã£o para a maioria dos objetos construÃ­dos em ABAP
Quando eu ainda era estagiÃ¡rio de Basis, eu desenvolvi bastante em C# por causa da faculdade. Aprendi tudo por conta prÃ³pria na
internet
, com vÃ¡rias videoaulas e materiais diversos de apoio. Se eu nÃ£o tivesse seguido o caminho do ABAP, hoje em dia eu provavelmente estaria trabalhando com .NET. </historinha>
E durante o desenvolvimento, Ã© comum que vocÃª se depare com alguns problemas que vocÃª talvez nÃ£o saiba imediatamente como resolver. Digamos, por exemplo, que surjaÂ a seguinte dÃºvida:
Dada uma data, como eu descubroÂ o dia da semana relacionado?
Um problema simples, assim como oÂ dos anagramas jÃ¡ mencionado. Pode ser atÃ© pergunta de teste. Se vocÃª jÃ¡ programou pelo menos uma semana na sua vida Ã© quase certo que vocÃª jÃ¡ tenha se deparado com ele. Portanto, Ã©Â Ã³bvio que vocÃª pode pesquisar no Google, e vocÃª encontrarÃ¡ centenas de milhares de resultados em
blogs
, listas de discussÃ£o, sites de pergunta/resposta, etc., afinal Ã© um problema trivial que jÃ¡ foi resolvido muitas vezes.
PorÃ©m, aoÂ buscar no Google por â€œC# weekdayâ€, o primeiro resultado vai serÂ de um site sensacionalÂ que Ã© a
biblioteca do MSDN
. Ali vocÃª encontra um repositÃ³rio de documentaÃ§Ãµes para QUAISQUER TIPOS de
framework
que a Microsoft jÃ¡ tenha desenvolvido. Inclusive dÃ¡ pra fazer a mesma pesquisa diretamente dentro da biblioteca, e logo vocÃª encontrarÃ¡ o mÃ©todo
DateAndTime.Weekday
(um nome claro e objetivo), junto com uma descriÃ§Ã£o COMPLETA contendo as dependÃªncias, os parÃ¢metros, os tipos de
exception
que o mÃ©todo retorna, e exemplos de uso.Â E se por algum acaso vocÃª estiver sem internet, o Visual Studio tem uma CÃ“PIA LOCAL dessa biblioteca para a versÃ£o do
framework
.NET que vocÃª estiver usando. Problema trivial, soluÃ§Ã£o simples e bem definida, documentaÃ§Ã£o e exemplos abundantes.
E no ABAP?
Continua Ã³bvio que vocÃª pode pesquisar no Google. Mas em vez de centenas de milhares de resultados sobre a mesma soluÃ§Ã£o, vocÃª vai encontrar centenas de milhares de resultados comÂ soluÃ§Ãµes diferentes: uma infinidade de
posts
no SCN com A MESMA PERGUNTA,
blogs
e fÃ³runs de qualidade diversa (em todo tipo de idioma), aqueles
sites
de catÃ¡logo de documentaÃ§Ã£o SAP como o
SE80
, aqueles sites de tutoriais como o
SAPTechnical
â€¦ vocÃª acaba pensando: â€œputz, qualquer um serve, vaiâ€.
E quando vocÃª decide escolher o â€œqualquer umâ€, vocÃª acaba com funÃ§Ãµes como
DATE_COMPUTE_DAY
(mas como assim, computar o quÃª?),
DATE_TO_DAY
(cadÃª o
week
?),
FTR_DAY_GET_TEXT
(FTR? â€œtextoâ€?),
RH_GET_DATE_DAYNAME
(RH? masÂ eu nÃ£o quero nome!), etc. AlÃ©m disso, dessas aÃ­ a ÃšNICA que tem documentaÃ§Ã£o na SE37 Ã© a
DATE_COMPUTE_DAY
. (AlÃ­as, segue aqui o problema anterior: essa funÃ§Ã£o tem 8 linhas de cÃ³digo. Ã€s vezes Ã© melhor copiar e implementar localmente.)
Observe bem aqui, caro zumbi, que eu nÃ£o estou criticando a documentaÃ§Ã£o da LINGUAGEM â€“ essa Ã© abundante e bem Ãºtil. Por exemplo, quandoÂ eu precisei implementar expressÃµes regulares pra fazer algumas validaÃ§Ãµes, eu descobri que
o tÃ³pico sobre esse assunto na documentaÃ§Ã£o ABAP
Ã© o suficiente para que vocÃª aprenda tudo que precisa. E alÃ©m disso, onde existem APIs normalmente hÃ¡ documentaÃ§Ã£o (vejam como esse problema estÃ¡ muito ligado ao anterior). PorÃ©m, pise fora do cercadinho e vocÃª estarÃ¡ perdido.
Ã‰ Ã³bvio que nÃ£o adianta querer aqui dar uma de paladino da moral e dos bons costumes e dizer em letras douradas e garrafais â€œÃ“ NOBRES COLEGAS, EU VOS SUPLICO, NÃƒO DEFINAMOS MAL NOSSOSÂ DICIONÃRIOS DE DADOS, ORGANIZEMOSÂ NOSSOS DESENVOLVIMENTOS COM APIs, PENSEMOSÂ NÃ“S EM ESCALABILIDADE, CRIEMOS NÃ“S DOCUMENTAÃ‡ÃƒO PRA TUDOâ€, etc., porque eu sei que nem sempre Ã© possÃ­vel controlar tudo isso, e tambÃ©m sÃ£o problemas que estÃ£o no
standard
.Â De novo: sÃ³ vim aqui pra reclamar.
E aÃ­? Muita groselha? Ou tÃ¡ certo? Comentem aÃ­ o que vocÃªs acham de ruim (ou bom?) no nosso querido COBOLscript.
AbraÃ§os e atÃ© a prÃ³xima.



ComentÃ¡rios:
Luis (06/05/2017 22:29): Boa Noite!  Leoâ€¦ estou comeÃ§ando a estudar ABAP, e estou tentando montar um relatÃ³rio.. a minha dificuldade e descobrir a estrutura das tabelas usadas pelo sistema original em CO no material ledger..por exemplo..a tabela que guarda a sequencia de processamento dos materiais no custo? Se vocÃª poder me dar umas dicas neste sentido eu te agradeÃ§o..
Paulo Silva (17/03/2017 15:19): Li o seu texto agora a pouco, coisa que gosto mas que eu nÃ£o fazia jÃ¡ faz um tempo. Sobre â€œanagramas entre si em ABAPâ€. O comando abaixo nÃ£o resolveria o problema? â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” IF _s1 CO _s2 AND NOT _s1 CN _s2. result = â€˜Xâ€™. ENDIF. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” s
  Leo Schmidt (17/03/2017 15:34): OlÃ¡ Paulo, obrigado por acompanhar o blog. Pela prÃ³pria documentaÃ§Ã£o vemos que NOT CN Ã© a mesma coisa que CO, e CO nÃ£o Ã© suficiente pra fazer esse teste. Portanto, continuamos com o problema. (Admito que tive que escrever isso pra testar ğŸ™‚ ) AbraÃ§os!
    Paulo Silva (17/03/2017 15:56): kkkkkk Fui presunÃ§oso! Da prÃ³xima vez testo o cÃ³digo antes de enviar. Pelo que vocÃª disse o cÃ³digo melhoraria para: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” IF _s1 CO _s2 AND _s2 CO _s1. result = â€˜Xâ€™. ENDIF. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” O problema seria â€œsomenteâ€ quando se repetissem caracteres, ex: â€œABCCCâ€ para â€œCCBBAâ€. Vou resolver (kkkk) assim que eu tiver um sistema na minha frente, entÃ£o retorno. AbraÃ§os. Value.
    Paulo Silva (17/03/2017 15:56): kkkkkk Fui presunÃ§oso! Da prÃ³xima vez testo o cÃ³digo antes de enviar. Pelo que vocÃª disse o cÃ³digo melhoraria para: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” IF _s1 CO _s2 AND _s2 CO _s1. result = â€˜Xâ€™. ENDIF. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” O problema seria â€œsomenteâ€ quando se repetissem caracteres, ex: â€œABCCCâ€ para â€œCCBBAâ€. Vou resolver (kkkk) assim que eu tiver um sistema na minha frente, entÃ£o retorno. AbraÃ§os. Value.
  Leo Schmidt (17/03/2017 15:34): OlÃ¡ Paulo, obrigado por acompanhar o blog. Pela prÃ³pria documentaÃ§Ã£o vemos que NOT CN Ã© a mesma coisa que CO, e CO nÃ£o Ã© suficiente pra fazer esse teste. Portanto, continuamos com o problema. (Admito que tive que escrever isso pra testar ğŸ™‚ ) AbraÃ§os!
    Paulo Silva (17/03/2017 15:56): kkkkkk Fui presunÃ§oso! Da prÃ³xima vez testo o cÃ³digo antes de enviar. Pelo que vocÃª disse o cÃ³digo melhoraria para: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” IF _s1 CO _s2 AND _s2 CO _s1. result = â€˜Xâ€™. ENDIF. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” O problema seria â€œsomenteâ€ quando se repetissem caracteres, ex: â€œABCCCâ€ para â€œCCBBAâ€. Vou resolver (kkkk) assim que eu tiver um sistema na minha frente, entÃ£o retorno. AbraÃ§os. Value.
    Paulo Silva (17/03/2017 15:56): kkkkkk Fui presunÃ§oso! Da prÃ³xima vez testo o cÃ³digo antes de enviar. Pelo que vocÃª disse o cÃ³digo melhoraria para: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” IF _s1 CO _s2 AND _s2 CO _s1. result = â€˜Xâ€™. ENDIF. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” O problema seria â€œsomenteâ€ quando se repetissem caracteres, ex: â€œABCCCâ€ para â€œCCBBAâ€. Vou resolver (kkkk) assim que eu tiver um sistema na minha frente, entÃ£o retorno. AbraÃ§os. Value.
Evandro (13/02/2017 14:23): Bom Leo tudo bem? Estou pesquisando a um bom tempo e atÃ© agora nÃ£o encontrei nada. VocÃª sabe se da para colocar a DescriÃ§Ã£o ao invÃ©s do cÃ³digo de Um search help ou de um Dominio, em uma ALV? Tem algum tutorial ou dica, explicando isso? Obrigado.
Custodio de Oliveira (20/06/2016 03:30): Belo post, Leo, mas me permita dar uma troladinha: CLASS lcl_string DEFINITION. PUBLIC SECTION. CLASS-METHODS: is_anagram IMPORTING s1            TYPE string s2            TYPE string RETURNING VALUE(result) TYPE abap_bool. ENDCLASS. CLASS lcl_string IMPLEMENTATION. METHOD is_anagram. result = xsdbool( s1 = reverse( s2 ) ). ENDMETHOD. ENDCLASS. Obrigado. De nada.
  Shai (19/08/2016 21:26): Iâ€™m afraid that your code doesnâ€™t check for anagram, but only if one string is the reverse of another string (Which is only one option of anagram).
    Custodio de Oliveira (21/08/2016 22:01): Hi Shai, You are absolutely right, and Iâ€™m a bit embarrassed actually ğŸ™ I really donâ€™t how I could read it so wrong. Iâ€™ll blame lack of clarity in the functional spec ğŸ˜€ Anyway, I read the problem again, and Leoâ€™s solution too, and I think the problem is (slightly) better/easier solved with the help of internal tables (the ruby/.net/java implementations convert the words to arrays, right?). Maybe Leo could elaborate why he chose not to use internal tables? CLASS lcl_string DEFINITION. PUBLIC SECTION. CLASS-METHODS: is_anagram IMPORTING s1            TYPE string s2            TYPE string RETURNING VALUE(result) TYPE abap_bool. ENDCLASS. CLASS lcl_string IMPLEMENTATION. METHOD is_anagram. DATA first_char_table  TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA second_char_table TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA offset TYPE i. DO strlen( s1 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s1+offset(1) ) ) INTO TABLE first_char_table. ENDDO. DO strlen( s2 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s2+offset(1) ) ) INTO TABLE second_char_table. ENDDO. result = xsdbool( first_char_table = second_char_table ). ENDMETHOD. ENDCLASS. Iâ€™ll try to come up with a better/shorter/ version for 7.40+ later. Cheers
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
    Custodio de Oliveira (21/08/2016 22:01): Hi Shai, You are absolutely right, and Iâ€™m a bit embarrassed actually ğŸ™ I really donâ€™t how I could read it so wrong. Iâ€™ll blame lack of clarity in the functional spec ğŸ˜€ Anyway, I read the problem again, and Leoâ€™s solution too, and I think the problem is (slightly) better/easier solved with the help of internal tables (the ruby/.net/java implementations convert the words to arrays, right?). Maybe Leo could elaborate why he chose not to use internal tables? CLASS lcl_string DEFINITION. PUBLIC SECTION. CLASS-METHODS: is_anagram IMPORTING s1            TYPE string s2            TYPE string RETURNING VALUE(result) TYPE abap_bool. ENDCLASS. CLASS lcl_string IMPLEMENTATION. METHOD is_anagram. DATA first_char_table  TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA second_char_table TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA offset TYPE i. DO strlen( s1 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s1+offset(1) ) ) INTO TABLE first_char_table. ENDDO. DO strlen( s2 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s2+offset(1) ) ) INTO TABLE second_char_table. ENDDO. result = xsdbool( first_char_table = second_char_table ). ENDMETHOD. ENDCLASS. Iâ€™ll try to come up with a better/shorter/ version for 7.40+ later. Cheers
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
  Leo Schmidt (20/06/2016 09:28): Olha CustÃ³dio, eu atÃ© ficaria bravo, mas como vc usou o termo â€œtrolarâ€ no contexto mais correto possÃ­vel , eu vou Ã© aplaudir seu comentÃ¡rio.
  Shai (19/08/2016 21:26): Iâ€™m afraid that your code doesnâ€™t check for anagram, but only if one string is the reverse of another string (Which is only one option of anagram).
    Custodio de Oliveira (21/08/2016 22:01): Hi Shai, You are absolutely right, and Iâ€™m a bit embarrassed actually ğŸ™ I really donâ€™t how I could read it so wrong. Iâ€™ll blame lack of clarity in the functional spec ğŸ˜€ Anyway, I read the problem again, and Leoâ€™s solution too, and I think the problem is (slightly) better/easier solved with the help of internal tables (the ruby/.net/java implementations convert the words to arrays, right?). Maybe Leo could elaborate why he chose not to use internal tables? CLASS lcl_string DEFINITION. PUBLIC SECTION. CLASS-METHODS: is_anagram IMPORTING s1            TYPE string s2            TYPE string RETURNING VALUE(result) TYPE abap_bool. ENDCLASS. CLASS lcl_string IMPLEMENTATION. METHOD is_anagram. DATA first_char_table  TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA second_char_table TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA offset TYPE i. DO strlen( s1 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s1+offset(1) ) ) INTO TABLE first_char_table. ENDDO. DO strlen( s2 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s2+offset(1) ) ) INTO TABLE second_char_table. ENDDO. result = xsdbool( first_char_table = second_char_table ). ENDMETHOD. ENDCLASS. Iâ€™ll try to come up with a better/shorter/ version for 7.40+ later. Cheers
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
    Custodio de Oliveira (21/08/2016 22:01): Hi Shai, You are absolutely right, and Iâ€™m a bit embarrassed actually ğŸ™ I really donâ€™t how I could read it so wrong. Iâ€™ll blame lack of clarity in the functional spec ğŸ˜€ Anyway, I read the problem again, and Leoâ€™s solution too, and I think the problem is (slightly) better/easier solved with the help of internal tables (the ruby/.net/java implementations convert the words to arrays, right?). Maybe Leo could elaborate why he chose not to use internal tables? CLASS lcl_string DEFINITION. PUBLIC SECTION. CLASS-METHODS: is_anagram IMPORTING s1            TYPE string s2            TYPE string RETURNING VALUE(result) TYPE abap_bool. ENDCLASS. CLASS lcl_string IMPLEMENTATION. METHOD is_anagram. DATA first_char_table  TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA second_char_table TYPE SORTED TABLE OF c WITH NON-UNIQUE KEY table_line. DATA offset TYPE i. DO strlen( s1 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s1+offset(1) ) ) INTO TABLE first_char_table. ENDDO. DO strlen( s2 ) TIMES. offset = sy-index â€“ 1. INSERT CONV #( to_lower( s2+offset(1) ) ) INTO TABLE second_char_table. ENDDO. result = xsdbool( first_char_table = second_char_table ). ENDMETHOD. ENDCLASS. Iâ€™ll try to come up with a better/shorter/ version for 7.40+ later. Cheers
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
      Leo Schmidt (22/08/2016 10:24): Wow, thereâ€™s a lot that went unsaid in this post/thread. I figured CustÃ³dio said he was trolling in the original/classical sense of it, because he provided a partial solution as if it was general, thus baiting other unwary readers to reply saying heâ€™s wrong. Maybe I misinterpreted it? ğŸ™‚ To clarify, my intents with this anagram example were: 1) to try and stay as close as possible to the other languagesâ€™ implementations, so I didnâ€™t want to declare any local variables (which I didnâ€™t manage to do; even with the use of REDUCE I had to declare iterators) and use as many built-in string functions as possible; 2) to showcase the lack of (and also how cumbersome are some) APIs in ABAP. Anyhow, my solutions are in fact a little obfuscating. I welcome all to contribute with their code to this challenge. Cheers!
  Leo Schmidt (20/06/2016 09:28): Olha CustÃ³dio, eu atÃ© ficaria bravo, mas como vc usou o termo â€œtrolarâ€ no contexto mais correto possÃ­vel , eu vou Ã© aplaudir seu comentÃ¡rio.
Raju Shrestha (07/06/2016 10:42): Very well written pain points in ABAP. Enjoyed the post. Regards, Raju.
  Leo Schmidt (07/06/2016 10:49): Thanks Raju! Iâ€™m glad for people reaching out, even if the content is in portuguese.
  Leo Schmidt (07/06/2016 10:49): Thanks Raju! Iâ€™m glad for people reaching out, even if the content is in portuguese.
Renato Piovesano Bartolamei (11/05/2016 17:11): Cada linguagem tem suas peculiaridades e isso faz parte do trabalho. O que mais me incomoda com o ABAP nÃ£o a parte tÃ©cnica, mas o mercado. HÃ¡ um â€œsocialismoâ€ no mercado onde quase a totalidade dos consultores sÃ£o seniores e a taxa deve ser â€œigualâ€ para todos, sendo valorizados apenas aqueles com habilidade de negociaÃ§Ã£o. JÃ¡ passei por muitos projetos em 15 anos de ABAP e sempre vi aqueles colegas que nÃ£o teriam condiÃ§Ã£o de serem assistentes de vice candidato a estagiÃ¡rio de aspirante a ABAP, mas ganham como senior. E tambÃ©m vi muitos ABAPs TOP de linha que fazem realmente a diferenÃ§a ganhar a mesma coisa que os outros â€œporque Ã© isso que o mercado paga!â€. O mercado trata o ABAP como comodite e com isso todos sÃ£o considerados como tendo a mesma capacidade tÃ©cnica. Esta falta de meritocracia (nÃ£o sei como Ã© no primeiro mundo) aqui no Brasil sÃ³ desestimula completamente o profissional. Mas as consultorias sabem cobrar por um consultor diferenciado, nÃ£o refletindo isso no pagamento.
Sonikro (10/05/2016 23:12): Concordo com todos os pontos. Uma das coisas que me incomoda mais, alÃ©m da syntax bizarra de OO, Ã© a falta de flexibilidade em relaÃ§Ã£o a Threads e Objetos.  Nada como implementar um Runnable na sua classe, e sair disparando e controlando as threads. No ABAP (atÃ© onde meu limitado conhecimento vai),  ficamos presos a funÃ§Ãµes starting new task,  Nada elegantes.
  Leo Schmidt (11/05/2016 13:58): As threads do SAP sÃ£o os work processes , mas nÃ³s como reles ABAPs nÃ£o podemos controlÃ¡-las. O STARTING NEW TASK na verdade cria uma chamada RFC assÃ­ncrona pra permitir o paralelismo. Mas ainda assim, como vc disse, nada elegante.
  Leo Schmidt (11/05/2016 13:58): As threads do SAP sÃ£o os work processes , mas nÃ³s como reles ABAPs nÃ£o podemos controlÃ¡-las. O STARTING NEW TASK na verdade cria uma chamada RFC assÃ­ncrona pra permitir o paralelismo. Mas ainda assim, como vc disse, nada elegante.